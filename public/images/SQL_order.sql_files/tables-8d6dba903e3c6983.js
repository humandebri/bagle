!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="791b932c-8d7a-4ad9-8122-9c864d3ea8a0",e._sentryDebugIdIdentifier="sentry-dbid-791b932c-8d7a-4ad9-8122-9c864d3ea8a0")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{487:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/tables",function(){return n(90975)}])},19692:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});let i=(0,n(47370).A)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]])},20829:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(80263),r=n(66452),a=n(79319),s=n(63320),o=n.n(s),l=n(16601);let c=e=>{let{title:t="",size:n="medium",children:s,ctaButtonLabel:c="",infoButtonLabel:d="",infoButtonUrl:u="",onClickCta:f=()=>{},loading:h=!1,disabled:p=!1,disabledMessage:m="",ctaUrl:g}=e,y=c&&f||u&&d;return(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center","data-sentry-component":"ProductEmptyState","data-sentry-source-file":"ProductEmptyState.tsx",children:(0,i.jsx)("div",{className:"flex space-x-4 rounded border bg-surface-100 p-6 shadow-md",children:(0,i.jsx)("div",{className:"flex flex-col",children:(0,i.jsxs)("div",{className:"".concat("medium"===n?"w-80":"w-[400px]"," space-y-4"),children:[(0,i.jsx)("h5",{className:"text-foreground",children:t}),(0,i.jsx)("div",{className:"flex flex-col space-y-2 text-foreground-light",children:s}),y&&(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[c&&g?(0,i.jsx)(l.$,{asChild:!0,type:"primary",children:(0,i.jsx)(o(),{href:g,children:c})}):c&&f?(0,i.jsx)(a.G,{type:"primary",onClick:f,loading:h,disabled:h||p,tooltip:{content:{side:"bottom",text:p&&m.length>0?m:void 0}},children:c}):null,u&&d?(0,i.jsx)(l.$,{type:"default",icon:(0,i.jsx)(r.A,{strokeWidth:1.5}),children:(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",href:u,children:d})}):null]})]})})})})}},26629:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});let i=(0,n(47370).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},46795:(e,t,n)=>{"use strict";n.d(t,{H:()=>i.A}),n(91824);var i=n(95875)},59168:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var i=n(80263),r=n(87467),a=n(53239),s=n(2),o=n(49189),l=n(16601),c=n(77690);function d(e){let{icon:t,className:n}=e;return(0,i.jsx)("div",{className:(0,s.cn)("absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-foreground-light",n),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:t})}let u=(0,a.forwardRef)((e,t)=>{let{copy:n,showCopyOnHover:u=!1,icon:f,reveal:h=!1,actions:p,onCopy:m,iconContainerClassName:g,containerClassName:y,...v}=e,[_,b]=(0,a.useState)("Copy"),[x,w]=(0,a.useState)(!0),k=(0,c.A)("input"),C=[];return f&&C.push(k.with_icon),(0,i.jsxs)("div",{className:(0,s.cn)("relative group",y),children:[(0,i.jsx)(o.p,{ref:t,...v,onCopy:m,value:h&&x?"**** **** **** ****":v.value,className:(0,s.cn)(...C,v.className)}),f&&(0,i.jsx)(d,{icon:f,className:g}),n||p?(0,i.jsxs)("div",{className:k.actions_container,children:[n&&!(h&&x)?(0,i.jsx)(l.$,{size:"tiny",type:"default",className:(0,s.cn)(u&&"opacity-0 group-hover:opacity-100 transition"),icon:(0,i.jsx)(r.A,{size:16,className:"text-foreground-muted"}),onClick:()=>(function(e){var t;null==(t=navigator.clipboard.writeText(e))||t.then(function(){b("Copied"),setTimeout(function(){b("Copy")},3e3),null==m||m()},function(){b("Failed to copy")})})(v.value),children:_}):null,h&&x?(0,i.jsx)(l.$,{size:"tiny",type:"default",onClick:function(){w(!1)},children:"Reveal"}):null,p&&p]}):null]})})},63236:(e,t,n)=>{"use strict";n.d(t,{A:()=>z});var i=n(80263),r=n(66452),a=n(63320),s=n.n(a),o=n(73969),l=n(5942),c=n(45969),d=n(87120),u=n(32144),f=n(80251),h=n(1438),p=n(77570),m=n(28128),g=n(29127),y=n(30053),v=n(30038);async function _(e){let{projectRef:t,connectionString:n,table:i,filters:r,roleImpersonationState:a}=e,s=(0,m.Nf)(function(e){var t;let{table:n,filters:i}=e,r=new h.Query().from(n.name,null!=(t=n.schema)?t:void 0).delete();return i.filter(e=>e.value&&""!==e.value).forEach(e=>{let t=(0,v.b)(n,e);r=r.filter(e.column,e.operator,t)}),r.toSql()}({table:i,filters:r}),a),{result:o}=await (0,p.E)({projectRef:t,connectionString:n,sql:s,isRoleImpersonationEnabled:(0,g._c)(null==a?void 0:a.role)});return o}let b=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,u.jE)();return(0,f.n)(e=>_(e),{async onSuccess(t,n,r){let{projectRef:a,table:s}=n;await i.invalidateQueries(y.j.tableRowsAndCount(a,s.id)),await (null==e?void 0:e(t,n,r))},async onError(e,n,i){void 0===t?o.oR.error("Failed to delete all table rows: ".concat(e.message)):t(e,n,i)},...n})};var x=n(57947),w=n(67007);async function k(e){let{projectRef:t,connectionString:n,table:i,rows:r,roleImpersonationState:a}=e,s=(0,m.Nf)(function(e){var t;let{table:n,rows:i}=e,{primaryKeys:r,error:a}=(0,v.j)({table:n});if(a)throw a;let s=new h.Query().from(n.name,null!=(t=n.schema)?t:void 0).delete();return null==r||r.forEach(e=>{let t=i.map(t=>t[e]);s=s.filter(e,"in",t)}),s.toSql()}({table:i,rows:r}),a),{result:o}=await (0,p.E)({projectRef:t,connectionString:n,sql:s,isRoleImpersonationEnabled:(0,g._c)(null==a?void 0:a.role)});return o}let C=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,u.jE)();return(0,f.n)(e=>k(e),{async onSuccess(t,n,i){let{projectRef:a,table:s}=n;await r.invalidateQueries(y.j.tableRowsAndCount(a,s.id)),await (null==e?void 0:e(t,n,i))},async onError(e,n,r){if(void 0===t){let{table:t,rows:r}=n,a=e.message.includes("Please add a primary key column"),s=e.message.includes("violates foreign key constraint"),l=r.length>1;if(s){let n=t.name,r=e.message.split("on table ")[2].replaceAll('"',""),a=e.message.split("foreign key constraint")[1].split("on table")[0].replaceAll('"',""),s=l?"Unable to delete rows as one of them is currently referenced by a foreign key constraint from the table `".concat(r,"`."):"Unable to delete row as it is currently referenced by a foreign key constraint from the table `".concat(r,"`."),c="Set an on delete behavior on the foreign key relation `".concat(a,"` in the `").concat(r,"` table to automatically respond when row(s) are being deleted in the `").concat(n,"` table.");(0,o.oR)(s,{description:(0,i.jsx)(x.o,{content:c,className:"[&>p]:m-0"}),action:(0,i.jsx)("div",{className:"w-full flex gap-x-2 !mx-0 mt-3",children:(0,i.jsx)(w.A,{href:"https://supabase.com/docs/guides/database/postgres/cascade-deletes"})})})}else a?(0,o.oR)("Unable to delete row(s) as table has no primary keys",{description:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"Add a primary key column to your table first to serve as a unique identifier for each row before updating or deleting the row."}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(w.A,{href:"https://supabase.com/docs/guides/database/tables#primary-keys"})})]})}):o.oR.error("Failed to delete table row: ".concat(e.message))}else t(e,n,r)},...n})};async function j(e){let{projectRef:t,connectionString:n,table:i}=e,r=function(e){var t;let{table:n}=e;return new h.Query().from(n.name,null!=(t=n.schema)?t:void 0).truncate().toSql()}({table:i}),{result:a}=await (0,p.E)({projectRef:t,connectionString:n,sql:r});return a}let E=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,u.jE)();return(0,f.n)(e=>j(e),{async onSuccess(t,n,r){let{projectRef:a,table:s}=n;await i.invalidateQueries(y.j.tableRowsAndCount(a,s.id)),await (null==e?void 0:e(t,n,r))},async onError(e,n,i){void 0===t?o.oR.error("Failed to truncate table row: ".concat(e.message)):t(e,n,i)},...n})};var S=n(53148),D=n(45276),R=n(7298),A=n(86303),T=n(9594),O=n(2411),I=n(98883),N=n(16601),L=n(36212),F=n(45732);let z=e=>{var t,n,a,u,f,h,p,m,y;let{selectedTable:v,onAfterDeleteTable:_=A.lQ}=e,{project:x}=(0,c.Om)(),w=(0,T.ap)(),{selectedSchema:k}=(0,R.k)(),{filters:j,setParams:z}=(0,F.o)(),M=(0,l.hl)(j),q=(0,D.Jc)({projectRef:null==x?void 0:x.ref,connectionString:null==x?void 0:x.connectionString}),P=e=>{let{ref:t,tableName:n,schema:i,columnName:r}=e;z(e=>{var a,s;let o=null!=(a=null==e?void 0:e.filter)?a:[],c=null!=(s=null==e?void 0:e.sort)?s:[],d={filter:o.filter(e=>{let[t]=e.split(":");if(t!==r)return e}),sort:c.filter(e=>{let[t]=e.split(":");if(t!==r)return e})};return(0,l.kz)({projectRef:t,tableName:n,schema:i,filters:d.filter,sorts:d.sort}),{...e,...d}})},{mutate:U}=(0,d.T)({onSuccess:()=>{var e;if((null==(e=w.confirmationDialog)?void 0:e.type)!=="column")return;let t=w.confirmationDialog.column;(null==x?void 0:x.ref)&&(null==v?void 0:v.name)&&(P({ref:null==x?void 0:x.ref,tableName:null==v?void 0:v.name,schema:t.schema,columnName:t.name}),o.oR.success('Successfully deleted column "'.concat(t.name,'"')))},onError:e=>{var t;if((null==(t=w.confirmationDialog)?void 0:t.type)!=="column")return;let n=w.confirmationDialog.column;o.oR.error("Failed to delete ".concat(n.name,": ").concat(e.message))},onSettled:()=>{w.closeConfirmationDialog()}}),{mutate:W}=(0,S.A)({onSuccess:async()=>{_(await q(k)),o.oR.success('Successfully deleted table "'.concat(null==v?void 0:v.name,'"'))},onError:e=>{o.oR.error("Failed to delete ".concat(null==v?void 0:v.name,": ").concat(e.message))},onSettled:()=>{w.closeConfirmationDialog()}}),{mutate:B}=C({onSuccess:()=>{var e,t,n;(null==(e=w.confirmationDialog)?void 0:e.type)==="row"&&(null==(t=(n=w.confirmationDialog).callback)||t.call(n)),o.oR.success("Successfully deleted selected row(s)")},onSettled:()=>{w.closeConfirmationDialog()}}),{mutate:Q}=b({onSuccess:()=>{var e,t,n;(null==(e=w.confirmationDialog)?void 0:e.type)==="row"&&(null==(t=(n=w.confirmationDialog).callback)||t.call(n)),o.oR.success("Successfully deleted selected rows")},onError:e=>{o.oR.error("Failed to delete rows: ".concat(e.message))},onSettled:()=>{w.closeConfirmationDialog()}}),{mutate:H}=E({onSuccess:()=>{var e,t,n;(null==(e=w.confirmationDialog)?void 0:e.type)==="row"&&(null==(t=(n=w.confirmationDialog).callback)||t.call(n)),o.oR.success("Successfully deleted all rows from table")},onError:e=>{o.oR.error("Failed to delete rows: ".concat(e.message))},onSettled:()=>{w.closeConfirmationDialog()}}),K=(null==(t=w.confirmationDialog)?void 0:t.type)==="row"&&w.confirmationDialog.allRowsSelected,$=(null==(n=w.confirmationDialog)?void 0:n.type)==="row"?w.confirmationDialog.allRowsSelected?null!=(y=w.confirmationDialog.numRows)?y:0:w.confirmationDialog.rows.length:0,J=((null==(a=w.confirmationDialog)?void 0:a.type)==="column"||(null==(u=w.confirmationDialog)?void 0:u.type)==="table")&&w.confirmationDialog.isDeleteWithCascade,X=async()=>{var e;if((null==(e=w.confirmationDialog)?void 0:e.type)!=="column"||void 0===x)return;let t=w.confirmationDialog.column;void 0!==t&&U({id:t.id,cascade:J,projectRef:x.ref,connectionString:null==x?void 0:x.connectionString,table:v})},G=async()=>{var e;(null==(e=w.confirmationDialog)?void 0:e.type)==="table"&&void 0!==v&&W({projectRef:null==x?void 0:x.ref,connectionString:null==x?void 0:x.connectionString,schema:v.schema,id:v.id,cascade:J})},Z=(0,g.Qj)(),V=async()=>{var e;if(!x)return console.error("Project ref is required");if(!v)return console.error("Selected table required");if((null==(e=w.confirmationDialog)?void 0:e.type)!=="row")return;let t=w.confirmationDialog.rows;if(w.confirmationDialog.allRowsSelected)if(0===M.length){if(void 0!==Z().role)return w.closeConfirmationDialog(),o.oR.error("Table truncation is not supported when impersonating a role");H({projectRef:x.ref,connectionString:x.connectionString,table:v})}else Q({projectRef:x.ref,connectionString:x.connectionString,table:v,filters:M,roleImpersonationState:Z()});else B({projectRef:x.ref,connectionString:x.connectionString,table:v,rows:t,roleImpersonationState:Z()})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.A,{variant:"destructive",size:"small",visible:(null==(f=w.confirmationDialog)?void 0:f.type)==="column",title:'Confirm deletion of column "'.concat((null==(h=w.confirmationDialog)?void 0:h.type)==="column"&&w.confirmationDialog.column.name,'"'),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>{w.closeConfirmationDialog()},onConfirm:X,"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"DeleteConfirmationDialogs.tsx",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected column? This action cannot be undone."}),(0,i.jsx)(O.A,{label:"Drop column with cascade?",description:"Deletes the column and its dependent objects",checked:J,onChange:()=>w.toggleConfirmationIsWithCascade(),"data-sentry-element":"Checkbox","data-sentry-source-file":"DeleteConfirmationDialogs.tsx"}),J&&(0,i.jsxs)(I.Fc,{variant:"warning",title:"Warning: Dropping with cascade may result in unintended consequences",children:[(0,i.jsx)(I.XL,{children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,i.jsx)(I.TN,{children:(0,i.jsx)(N.$,{asChild:!0,size:"tiny",type:"default",icon:(0,i.jsx)(r.A,{}),children:(0,i.jsx)(s(),{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})})]})]})}),(0,i.jsx)(L.A,{variant:"destructive",size:"small",visible:(null==(p=w.confirmationDialog)?void 0:p.type)==="table",title:(0,i.jsx)("span",{className:"break-words",children:'Confirm deletion of table "'.concat(null==v?void 0:v.name,'"')}),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>{w.closeConfirmationDialog()},onConfirm:G,"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"DeleteConfirmationDialogs.tsx",children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected table? This action cannot be undone."}),(0,i.jsx)(O.A,{label:"Drop table with cascade?",description:"Deletes the table and its dependent objects",checked:J,onChange:()=>w.toggleConfirmationIsWithCascade(!J),"data-sentry-element":"Checkbox","data-sentry-source-file":"DeleteConfirmationDialogs.tsx"}),J&&(0,i.jsxs)(I.Fc,{variant:"warning",children:[(0,i.jsx)(I.XL,{children:"Warning: Dropping with cascade may result in unintended consequences"}),(0,i.jsx)(I.TN,{children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,i.jsx)(I.TN,{className:"mt-4",children:(0,i.jsx)(N.$,{asChild:!0,size:"tiny",type:"default",icon:(0,i.jsx)(r.A,{}),children:(0,i.jsx)(s(),{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})})]})]})}),(0,i.jsx)(L.A,{variant:"destructive",size:"small",visible:(null==(m=w.confirmationDialog)?void 0:m.type)==="row",title:(0,i.jsxs)("p",{className:"break-words",children:[(0,i.jsx)("span",{children:"Confirm to delete the selected row"}),(0,i.jsx)("span",{children:$>1&&"s"})]}),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>w.closeConfirmationDialog(),onConfirm:()=>V(),"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"DeleteConfirmationDialogs.tsx",children:(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:[(0,i.jsx)("span",{children:"Are you sure you want to delete "}),(0,i.jsxs)("span",{children:[K?"all":"the selected"," "]}),(0,i.jsx)("span",{children:$>1&&"".concat($," ")}),(0,i.jsx)("span",{children:"row"}),(0,i.jsx)("span",{children:$>1&&"s"}),(0,i.jsx)("span",{children:"? This action cannot be undone."})]})})})]})}},77191:function(e,t){var n,i;void 0===(i="function"==typeof(n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,i=t.IS_PAPA_WORKER||!1,r={},a=0,s={parse:function(n,i){var o,l=(i=i||{}).dynamicTyping||!1;if(x(l)&&(i.dynamicTypingFunction=l,l={}),i.dynamicTyping=l,i.transform=!!x(i.transform)&&i.transform,i.worker&&s.WORKERS_SUPPORTED){var h=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,i,o=(n=t.URL||t.webkitURL||null,i=e.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",i,")();"],{type:"text/javascript"})))),l=new t.Worker(o);return l.onmessage=g,l.id=a++,r[l.id]=l}();return h.userStep=i.step,h.userChunk=i.chunk,h.userComplete=i.complete,h.userError=i.error,i.step=x(i.step),i.chunk=x(i.chunk),i.complete=x(i.complete),i.error=x(i.error),delete i.worker,void h.postMessage({input:n,config:i,workerId:h.id})}var p=null;return s.NODE_STREAM_INPUT,"string"==typeof n?(n=65279===(o=n).charCodeAt(0)?o.slice(1):o,p=i.download?new c(i):new u(i)):!0===n.readable&&x(n.read)&&x(n.on)?p=new f(i):(t.File&&n instanceof File||n instanceof Object)&&(p=new d(i)),p.stream(n)},unparse:function(e,t){var n=!1,i=!0,r=",",a="\r\n",o='"',l=o+o,c=!1,d=null,u=!1;if("object"==typeof t){if("string"!=typeof t.delimiter||s.BAD_DELIMITERS.filter(function(e){return -1!==t.delimiter.indexOf(e)}).length||(r=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(o=t.quoteChar),"boolean"==typeof t.header&&(i=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw Error("Option columns is empty");d=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+o),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(u=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}var f=RegExp(p(o),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,c);if("object"==typeof e[0])return h(d||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||d),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),h(e.fields||[],e.data||[],c);throw Error("Unable to serialize unrecognized input");function h(e,t,n){var s="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var o=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(o&&i){for(var c=0;c<e.length;c++)0<c&&(s+=r),s+=m(e[c],c);0<t.length&&(s+=a)}for(var d=0;d<t.length;d++){var u=o?e.length:t[d].length,f=!1,h=o?0===Object.keys(t[d]).length:0===t[d].length;if(n&&!o&&(f="greedy"===n?""===t[d].join("").trim():1===t[d].length&&0===t[d][0].length),"greedy"===n&&o){for(var p=[],g=0;g<u;g++){var y=l?e[g]:g;p.push(t[d][y])}f=""===p.join("").trim()}if(!f){for(var v=0;v<u;v++){0<v&&!h&&(s+=r);var _=o&&l?e[v]:v;s+=m(t[d][_],v)}d<t.length-1&&(!n||0<u&&!h)&&(s+=a)}}return s}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var i=!1;u&&"string"==typeof e&&u.test(e)&&(e="'"+e,i=!0);var a=e.toString().replace(f,l);return(i=i||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(a,s.BAD_DELIMITERS)||-1<a.indexOf(r)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?o+a+o:a}}};if(s.RECORD_SEP="\x1e",s.UNIT_SEP="\x1f",s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!t.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=0xa00000,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=m,s.ParserHandle=h,s.NetworkStreamer=c,s.FileStreamer=d,s.StringStreamer=u,s.ReadableStreamStreamer=f,t.jQuery){var o=t.jQuery;o.fn.parse=function(e){var n=e.config||{},i=[];return this.each(function(e){if(!("INPUT"===o(this).prop("tagName").toUpperCase()&&"file"===o(this).attr("type").toLowerCase()&&t.FileReader)||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:o.extend({},n)})}),r(),this;function r(){if(0!==i.length){var t,n,r,l,c=i[0];if(x(e.before)){var d=e.before(c.file,c.inputElem);if("object"==typeof d){if("abort"===d.action)return t="AbortError",n=c.file,r=c.inputElem,l=d.reason,void(x(e.error)&&e.error({name:t},n,r,l));if("skip"===d.action)return void a();"object"==typeof d.config&&(c.instanceConfig=o.extend(c.instanceConfig,d.config))}else if("skip"===d)return void a()}var u=c.instanceConfig.complete;c.instanceConfig.complete=function(e){x(u)&&u(e,c.file,c.inputElem),a()},s.parse(c.file,c.instanceConfig)}else x(e.complete)&&e.complete()}function a(){i.splice(0,1),r()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var t=_(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new h(t),(this._handle.streamer=this)._config=t}).call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(e);void 0!==r&&(e=r)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var o=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=o.meta.cursor;this._finished||(this._partialLine=a.substring(l-this._baseIndex),this._baseIndex=l),o&&o.data&&(this._rowCount+=o.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)t.postMessage({results:o,workerId:s.WORKER_ID,finished:c});else if(x(this._config.chunk)&&!n){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!c||!x(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){x(this._config.error)?this._config.error(e):i&&this._config.error&&t.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),l.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var i in e)t.setRequestHeader(i,e[i])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){var e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(e=t.getResponseHeader("Content-Range"))?-1:parseInt(e.substring(e.lastIndexOf("/")+1))),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(Error(n))}}function d(e){(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),l.call(this,e);var t,n,i="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,i?((t=new FileReader).onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,r)}var a=t.readAsText(e,this._config.encoding);i||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function u(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function f(e){l.call(this,e=e||{});var t=[],n=!0,i=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=b(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=b(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=b(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function h(e){var t,n,i,r=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,a=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,o=this,l=0,c=0,d=!1,u=!1,f=[],h={data:[],errors:[],meta:{}};if(x(e.step)){var g=e.step;e.step=function(t){if(h=t,b())v();else{if(v(),0===h.data.length)return;l+=t.data.length,e.preview&&l>e.preview?n.abort():(h.data=h.data[0],g(h,o))}}}function y(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function v(){return h&&i&&(w("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),i=!1),e.skipEmptyLines&&(h.data=h.data.filter(function(e){return!y(e)})),b()&&function(){if(h)if(Array.isArray(h.data[0])){for(var t=0;b()&&t<h.data.length;t++)h.data[t].forEach(n);h.data.splice(0,1)}else h.data.forEach(n);function n(t,n){x(e.transformHeader)&&(t=e.transformHeader(t,n)),f.push(t)}}(),function(){if(!h||!e.header&&!e.dynamicTyping&&!e.transform)return h;function t(t,n){var i,s=e.header?{}:[];for(i=0;i<t.length;i++){var o,l,d=i,u=t[i];e.header&&(d=i>=f.length?"__parsed_extra":f[i]),e.transform&&(u=e.transform(u,d)),o=d,l=u,e.dynamicTypingFunction&&void 0===e.dynamicTyping[o]&&(e.dynamicTyping[o]=e.dynamicTypingFunction(o)),u=!0===(e.dynamicTyping[o]||e.dynamicTyping)?"true"===l||"TRUE"===l||"false"!==l&&"FALSE"!==l&&(!function(e){if(r.test(e)){var t=parseFloat(e);if(-0x20000000000000<t&&t<0x20000000000000)return!0}return!1}(l)?a.test(l)?new Date(l):""===l?null:l:parseFloat(l)):l,"__parsed_extra"===d?(s[d]=s[d]||[],s[d].push(u)):s[d]=u}return e.header&&(i>f.length?w("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+i,c+n):i<f.length&&w("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+i,c+n)),s}var n=1;return!h.data.length||Array.isArray(h.data[0])?(h.data=h.data.map(t),n=h.data.length):h.data=t(h.data,0),e.header&&h.meta&&(h.meta.fields=f),c+=n,h}()}function b(){return e.header&&0===f.length}function w(e,t,n,i){var r={type:e,code:t,message:n};void 0!==i&&(r.row=i),h.errors.push(r)}this.parse=function(r,a,o){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=RegExp(p(t)+"([^]*?)"+p(t),"gm"),i=(e=e.replace(n,"")).split("\r"),r=e.split("\n"),a=1<r.length&&r[0].length<i[0].length;if(1===i.length||a)return"\n";for(var s=0,o=0;o<i.length;o++)"\n"===i[o][0]&&s++;return s>=i.length/2?"\r\n":"\r"}(r,l)),i=!1,e.delimiter)x(e.delimiter)&&(e.delimiter=e.delimiter(r),h.meta.delimiter=e.delimiter);else{var c=function(t,n,i,r,a){var o,l,c,d;a=a||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var u=0;u<a.length;u++){var f=a[u],h=0,p=0,g=0;c=void 0;for(var v=new m({comments:r,delimiter:f,newline:n,preview:10}).parse(t),_=0;_<v.data.length;_++)if(i&&y(v.data[_]))g++;else{var b=v.data[_].length;p+=b,void 0!==c?0<b&&(h+=Math.abs(b-c),c=b):c=b}0<v.data.length&&(p/=v.data.length-g),(void 0===l||h<=l)&&(void 0===d||d<p)&&1.99<p&&(l=h,o=f,d=p)}return{successful:!!(e.delimiter=o),bestDelimiter:o}}(r,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(i=!0,e.delimiter=s.DefaultDelimiter),h.meta.delimiter=e.delimiter}var u=_(e);return e.preview&&e.header&&u.preview++,t=r,h=(n=new m(u)).parse(t,a,o),v(),d?{meta:{paused:!0}}:h||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),t=x(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){o.streamer._halted?(d=!1,o.streamer.parseChunk(t,!0)):setTimeout(o.resume,3)},this.aborted=function(){return u},this.abort=function(){u=!0,n.abort(),h.meta.aborted=!0,x(e.complete)&&e.complete(h),t=""}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,n=(e=e||{}).delimiter,i=e.newline,r=e.comments,a=e.step,o=e.preview,l=e.fastMode,c=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<s.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var d=0,u=!1;this.parse=function(s,f,h){if("string"!=typeof s)throw Error("Input must be a string");var m=s.length,g=n.length,y=i.length,v=r.length,_=x(a),b=[],w=[],k=[],C=d=0;if(!s)return K();if(e.header&&!f){var j=s.split(i)[0].split(n),E=[],S={},D=!1;for(var R in j){var A=j[R];x(e.transformHeader)&&(A=e.transformHeader(A,R));var T=A,O=S[A]||0;for(0<O&&(D=!0,T=A+"_"+O),S[A]=O+1;E.includes(T);)T=T+"_"+O;E.push(T)}if(D){var I=s.split(i);I[0]=E.join(n),s=I.join(i)}}if(l||!1!==l&&-1===s.indexOf(t)){for(var N=s.split(i),L=0;L<N.length;L++){if(k=N[L],d+=k.length,L!==N.length-1)d+=i.length;else if(h)break;if(!r||k.substring(0,v)!==r){if(_){if(b=[],W(k.split(n)),$(),u)return K()}else W(k.split(n));if(o&&o<=L)return b=b.slice(0,o),K(!0)}}return K()}for(var F=s.indexOf(n,d),z=s.indexOf(i,d),M=RegExp(p(c)+p(t),"g"),q=s.indexOf(t,d);;)if(s[d]!==t)if(r&&0===k.length&&s.substring(d,d+v)===r){if(-1===z)return K();d=z+y,z=s.indexOf(i,d),F=s.indexOf(n,d)}else if(-1!==F&&(F<z||-1===z))k.push(s.substring(d,F)),d=F+g,F=s.indexOf(n,d);else{if(-1===z)break;if(k.push(s.substring(d,z)),H(z+y),_&&($(),u))return K();if(o&&b.length>=o)return K(!0)}else for(q=d,d++;;){if(-1===(q=s.indexOf(t,q+1)))return h||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:d}),Q();if(q===m-1)return Q(s.substring(d,q).replace(M,t));if(t!==c||s[q+1]!==c){if(t===c||0===q||s[q-1]!==c){-1!==F&&F<q+1&&(F=s.indexOf(n,q+1)),-1!==z&&z<q+1&&(z=s.indexOf(i,q+1));var P=B(-1===z?F:Math.min(F,z));if(s.substr(q+1+P,g)===n){k.push(s.substring(d,q).replace(M,t)),s[d=q+1+P+g]!==t&&(q=s.indexOf(t,d)),F=s.indexOf(n,d),z=s.indexOf(i,d);break}var U=B(z);if(s.substring(q+1+U,q+1+U+y)===i){if(k.push(s.substring(d,q).replace(M,t)),H(q+1+U+y),F=s.indexOf(n,d),q=s.indexOf(t,d),_&&($(),u))return K();if(o&&b.length>=o)return K(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:d}),q++}}else q++}return Q();function W(e){b.push(e),C=d}function B(e){var t=0;if(-1!==e){var n=s.substring(q+1,e);n&&""===n.trim()&&(t=n.length)}return t}function Q(e){return h||(void 0===e&&(e=s.substring(d)),k.push(e),d=m,W(k),_&&$()),K()}function H(e){d=e,W(k),k=[],z=s.indexOf(i,d)}function K(e){return{data:b,errors:w,meta:{delimiter:n,linebreak:i,aborted:u,truncated:!!e,cursor:C+(f||0)}}}function $(){a(K()),b=[],w=[]}},this.abort=function(){u=!0},this.getCharIndex=function(){return d}}function g(e){var t=e.data,n=r[t.workerId],i=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){i=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(x(n.userStep)){for(var s=0;s<t.results.data.length&&(n.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},a),!i);s++);delete t.results}else x(n.userChunk)&&(n.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!i&&y(t.workerId,t.results)}function y(e,t){var n=r[e];x(n.userComplete)&&n.userComplete(t),n.terminate(),delete r[e]}function v(){throw Error("Not implemented.")}function _(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=_(e[n]);return t}function b(e,t){return function(){e.apply(t,arguments)}}function x(e){return"function"==typeof e}return i&&(t.onmessage=function(e){var n=e.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var i=s.parse(n.input,n.config);i&&t.postMessage({workerId:s.WORKER_ID,results:i,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(d.prototype=Object.create(l.prototype)).constructor=d,(u.prototype=Object.create(u.prototype)).constructor=u,(f.prototype=Object.create(l.prototype)).constructor=f,s})?n.apply(t,[]):n)||(e.exports=i)},90975:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var i=n(80263),r=n(53239),a=n(9039),s=n(46795),o=n(63236),l=n(6506),c=n(67397),d=n(95207),u=n(93463),f=n(9594);let h=()=>{let e=(0,f.ap)(),[t,n]=(0,r.useState)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"index.tsx",children:(0,i.jsx)(d.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"index.tsx",children:(0,i.jsxs)("div",{className:"col-span-12",children:[(0,i.jsx)(u.M,{title:"Database Tables","data-sentry-element":"FormHeader","data-sentry-source-file":"index.tsx"}),(0,i.jsx)(a.B3,{onAddTable:e.onAddTable,onEditTable:t=>{n(t),e.onEditTable()},onDeleteTable:t=>{n(t),e.onDeleteTable()},onDuplicateTable:t=>{n(t),e.onDuplicateTable()},"data-sentry-element":"TableList","data-sentry-source-file":"index.tsx"})]})})}),(0,i.jsx)(o.A,{selectedTable:t,"data-sentry-element":"DeleteConfirmationDialogs","data-sentry-source-file":"index.tsx"}),(0,i.jsx)(s.H,{includeColumns:!0,selectedTable:t,"data-sentry-element":"SidePanelEditor","data-sentry-source-file":"index.tsx"})]})};h.getLayout=e=>(0,i.jsx)(c.A,{children:(0,i.jsx)(l.A,{title:"Database",children:e})});let p=h},91824:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(80263),r=n(60045),a=n(45969),s=n(20829),o=n(7677),l=n(65904),c=n(89756),d=n(7298),u=n(36365),f=n(9594);let h=e=>{var t,n;let{}=e,h=(0,f.ap)(),{selectedSchema:p}=(0,d.k)(),m=u.i.includes(p),g=(0,l.SE)(r.aG.TENANT_SQL_ADMIN_WRITE,"tables")&&!m,[y]=(0,c.M)("table-editor-sort","alphabetical"),{project:v}=(0,a.Om)(),{data:_}=(0,o.kD)({projectRef:null==v?void 0:v.ref,connectionString:null==v?void 0:v.connectionString,schemas:[p],sort:y}),b=null!=(n=null==_||null==(t=_.pages)?void 0:t[0].data.count)?n:0;return(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center","data-sentry-component":"EmptyState","data-sentry-source-file":"EmptyState.tsx",children:0===b?(0,i.jsx)(s.A,{title:"Table Editor",ctaButtonLabel:g?"Create a new table":void 0,onClickCta:g?h.onAddTable:void 0,children:(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"There are no tables available in this schema."})}):(0,i.jsx)("div",{className:"flex flex-col items-center space-y-4",children:(0,i.jsx)(s.A,{title:"Table Editor",ctaButtonLabel:g?"Create a new table":void 0,onClickCta:g?h.onAddTable:void 0,children:(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["Select a table from the navigation panel on the left to view its data",g&&", or create a new one."]})})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[89,4335,9413,6110,3342,4376,2180,7990,8058,5513,5944,4346,2981,6835,7762,9067,2809,9711,6616,488,8591,2722,7397,886,1152,8601,3381,8542,5986,6232,6593,636,8792],()=>t(487)),_N_E=e.O()}]);