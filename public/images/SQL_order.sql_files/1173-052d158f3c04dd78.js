!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=(new e.Error).stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="0fc69d6b-8774-40bd-8a23-0d0c1c5a6191",e._sentryDebugIdIdentifier="sentry-dbid-0fc69d6b-8774-40bd-8a23-0d0c1c5a6191")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1173],{35875:(e,i,r)=>{r.d(i,{Gc:()=>s,Zj:()=>_});var o=r(56947),t=r(53434),n=r.n(t),l=r(53239),a=r(3807),c=r(96688),d=r(32429);async function u(e,i){let{projectRef:r}=e;if(!r)throw Error("Project ref is required");let{data:o,error:t}=await (0,a.Jt)("/platform/projects/{ref}/disk",{params:{path:{ref:r}},signal:i});return t&&(0,a.H4)(t),o}let s=function(e){let{projectRef:i}=e,{enabled:r=!0,...t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.I)(d.n.diskAttributes(i),e=>{let{signal:r}=e;return u({projectRef:i},r)},{enabled:r&&void 0!==i,...t})},_=e=>{var i;let{projectRef:r,enabled:o=!0}=e,{data:t,isLoading:a,isError:d,isSuccess:u,error:_}=s({projectRef:r},{enabled:o}),p=n()(null!=(i=null==t?void 0:t.last_modified_at)?i:"").utc(),g=Math.max(0,n()().utc().diff(n()(p).utc(),"second")),m=(0,l.useMemo)(()=>void 0===p||c.Xz-g<0?0:c.Xz-g,[p,g]);return(null==t?void 0:t.last_modified_at)===void 0?{remainingDuration:0,isWithinCooldownWindow:!1,isLoading:a,isError:d,error:_,isSuccess:u}:{remainingDuration:m,isWithinCooldownWindow:m>0,isLoading:a,isError:d,error:_,isSuccess:u}}},49495:(e,i,r)=>{r.d(i,{$6:()=>f,$C:()=>d,CQ:()=>s,Fu:()=>_,HE:()=>u,QV:()=>y,T2:()=>m,Uk:()=>l,WC:()=>n,ZV:()=>v,a6:()=>g,it:()=>p,ku:()=>x,ou:()=>c,t5:()=>a,u1:()=>h});var o=r(58897),t=r(60937);let n=e=>{var i,r,o,n;let{planId:l,oldSize:a,oldStorageType:c,newSize:d,newStorageType:u,numReplicas:s=0}=e,_=null!=(o=null==(i=t.zN[c])?void 0:i.storage)?o:0,p=null!=(n=null==(r=t.zN[u])?void 0:r.storage)?n:0,{includedDiskGB:g}=null===t.Jh||void 0===t.Jh?void 0:t.Jh[l],m=Math.max(a-g[c],0)*_,h=Math.max(d-g[u],0)*p;return{oldPrice:(m+1.25*a*_*s).toFixed(2),newPrice:(h+1.25*d*p*s).toFixed(2)}},l=e=>{var i,r,o,t;let{availableOptions:n,oldComputeSize:l,newComputeSize:a,plan:c}=e,d=l;"free"!==c&&"ci_nano"===l&&(d="ci_micro");let u=null!=(o=null==n||null==(i=n.find(e=>e.identifier===d))?void 0:i.price)?o:0,s=null!=(t=null==n||null==(r=n.find(e=>e.identifier===a))?void 0:r.price)?t:0;return{oldPrice:(720*u).toFixed(2),newPrice:(720*s).toFixed(2)}},a=e=>{var i,r,o,n,l,a,c,d;let{oldStorageType:u,oldProvisionedIOPS:s,newStorageType:_,newProvisionedIOPS:p,numReplicas:g=0}=e;if(_===t.y6.GP3){let e=Math.max(0,s-t.No[t.y6.GP3].includedIops),l=Math.max(0,p-t.No[t.y6.GP3].includedIops),a=e*(null!=(o=null==(i=t.zN[u])?void 0:i.iops)?o:0),c=l*(null!=(n=null==(r=t.zN[_])?void 0:r.iops)?n:0);return{oldPrice:(a*(1+g)).toFixed(2),newPrice:(c*(1+g)).toFixed(2)}}{let e="gp3"===u?(s-t.No[u].includedIops)*t.zN[u].iops:s*(null!=(c=null==(l=t.zN[u])?void 0:l.iops)?c:0),i=p*(null!=(d=null==(a=t.zN[_])?void 0:a.iops)?d:0);return{oldPrice:(e*(1+g)).toFixed(2),newPrice:(i*(1+g)).toFixed(2)}}},c=e=>{let{storageType:i,newThroughput:r,oldThroughput:o,numReplicas:n=0}=e;if(i===t.y6.GP3&&r){let e=Math.max(0,o-t.No[t.y6.GP3].includedThroughput),i=Math.max(0,r-t.No[t.y6.GP3].includedThroughput),l=e*t.zN[t.y6.GP3].throughput,a=i*t.zN[t.y6.GP3].throughput;return{oldPrice:(l*(1+n)).toFixed(2),newPrice:(a*(1+n)).toFixed(2)}}return{oldPrice:"0.00",newPrice:"0.00"}};function d(e,i){var r,t;let n=null!=(t=null==(r=e.find(e=>"compute_instance"===e.type))?void 0:r.variants.filter(e=>{if(!i)return!0;let r=e.meta;return!r.supported_cloud_providers||r.supported_cloud_providers.includes(i)}))?t:[];return n.unshift({identifier:"ci_nano",name:"Nano",price_description:"$0/hour (~$0/month)",price:0,price_interval:"hourly",price_type:"usage",meta:{cpu_cores:o.kC.cpu_cores,cpu_dedicated:o.kC.cpu_dedicated,memory_gb:o.kC.memory_gb,baseline_disk_io_mbs:o.kC.baseline_disk_io_mbs,max_disk_io_mbs:o.kC.max_disk_io_mbs,connections_direct:o.kC.connections_direct,connections_pooler:o.kC.connections_pooler}}),n}let u=e=>Math.min(3e3*e,16e3),s=e=>Math.max(1,Math.ceil(e/500)),_=e=>Math.min(500*e,256e3),p=e=>Math.max(4,Math.ceil(e/1e3)),g=e=>Math.max(125,Math.ceil(e/.256)),m=e=>t.QL[e]||0,h=e=>{let i=Object.entries(t.QL).sort((e,i)=>e[1]-i[1]);for(let[r,o]of i)if(e<=o)return r;return i[i.length-1][0]},f=e=>({pico:"ci_pico",nano:"ci_nano",micro:"ci_micro",small:"ci_small",medium:"ci_medium",large:"ci_large",xlarge:"ci_xlarge","2xlarge":"ci_2xlarge","4xlarge":"ci_4xlarge","8xlarge":"ci_8xlarge","12xlarge":"ci_12xlarge","16xlarge":"ci_16xlarge"})[null!=e?e:"nano"],x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ci_nano";return({ci_nano:"Nano",ci_micro:"Micro",ci_small:"Small",ci_medium:"Medium",ci_large:"Large",ci_xlarge:"XL",ci_2xlarge:"2XL",ci_4xlarge:"4XL",ci_8xlarge:"8XL",ci_12xlarge:"12XL",ci_16xlarge:"16XL"})[e]},v=e=>e.toLocaleString("en-US"),y=(e,i)=>"free"!==e&&"nano"===i},60937:(e,i,r)=>{r.d(i,{EH:()=>p,JM:()=>s,Jh:()=>c,No:()=>a,QL:()=>d,SZ:()=>n,eQ:()=>_,nU:()=>o,tt:()=>u,y6:()=>t,zN:()=>l});let o=.9;var t=function(e){return e.GP3="gp3",e.IO2="io2",e}({});let n={growthPercent:50,minIncrementSize:4,maxSizeGb:6e4},l={gp3:{storage:.125,iops:.024,throughput:.095},io2:{storage:.195,iops:.119}},a={gp3:{minStorage:1,maxStorage:16384,minIops:3e3,maxIops:16e3,minThroughput:125,maxThroughput:1e3,includedIops:3e3,includedThroughput:125},io2:{minStorage:4,maxStorage:61440,minIops:1500,maxIops:256e3,includedIops:0,includedThroughput:0}},c={free:{includedDiskGB:{gp3:1,io2:0}},pro:{includedDiskGB:{gp3:8,io2:0}},team:{includedDiskGB:{gp3:8,io2:0}},enterprise:{includedDiskGB:{gp3:8,io2:0}}},d={ci_nano:250,ci_micro:500,ci_small:1e3,ci_medium:2e3,ci_large:3600,ci_xlarge:6e3,ci_2xlarge:12e3,ci_4xlarge:2e4,ci_8xlarge:4e4,ci_12xlarge:5e4,ci_16xlarge:8e4},u={ci_nano:43,ci_micro:87,ci_small:174,ci_medium:347,ci_large:630,ci_xlarge:1188,ci_2xlarge:2375,ci_4xlarge:4750,ci_8xlarge:9500,ci_12xlarge:14250,ci_16xlarge:19e3},s=["ci_nano","ci_micro","ci_small","ci_medium"],_=["ci_nano","ci_micro","ci_small","ci_medium"],p=[{type:"gp3",name:"General Purpose SSD",description:"Balance between price and performance"},{type:"io2",name:"High Performance SSD",description:"High performance for mission critical applications"}]},96688:(e,i,r)=>{r.d(i,{Xz:()=>c,_J:()=>u});var o=r(32144),t=r(80251),n=r(73969),l=r(3807),a=r(32429);let c=21600;async function d(e){if(!e.ref)throw Error("ref is required");let i="gp3"===e.storageType?{iops:e.provisionedIOPS,throughput_mbps:e.throughput,size_gb:e.totalSize,type:e.storageType}:{iops:e.provisionedIOPS,size_gb:e.totalSize,type:e.storageType},{data:r,error:o}=await (0,l.bE)("/platform/projects/{ref}/disk",{params:{path:{ref:e.ref}},body:{attributes:i}});return o&&(0,l.H4)(o),r}let u=function(){let{onSuccess:e,onError:i,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,o.jE)();return(0,t.n)(e=>d(e),{async onSuccess(i,r,o){let{ref:t}=r;await l.invalidateQueries(a.n.diskAttributes(t)),await (null==e?void 0:e(i,r,o))},async onError(e,r,o){void 0===i?n.oR.error("Failed to update disk attributes: ".concat(e.message)):i(e,r,o)},...r})}}}]);