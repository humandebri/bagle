!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f9813634-119e-4401-9fc1-c410e90b8136",e._sentryDebugIdIdentifier="sentry-dbid-f9813634-119e-4401-9fc1-c410e90b8136")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4802],{6220:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tt});var s=a(80263),i=a(32981),n=a(60045),r=a(32144),l=a(88712),o=a(37055),d=a(28894),c=a(63320),u=a.n(c),m=a(53239),p=a(87494),h=a(73969),x=a(82489),g=a(45969),f=a(95207),y=a(67007),v=a(35875),j=a(96688),b=a(56947),S=a(3807),N=a(32429);async function w(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:s,error:i}=await (0,S.Jt)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:a}},signal:t});return i&&(0,S.H4)(i),s}let z=function(e){let{projectRef:t}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.I)(N.n.diskAutoscaleConfig(t),e=>{let{signal:a}=e;return w({projectRef:t},a)},{enabled:a&&void 0!==t,...s})};var P=a(80251);async function k(e){let{projectRef:t,growthPercent:a,maxSizeGb:s,minIncrementGb:i}=e;if(!t)throw Error("projectRef is required");let{data:n,error:r}=await (0,S.bE)("/platform/projects/{ref}/disk/custom-config",{params:{path:{ref:t}},body:{growth_percent:a,max_size_gb:s,min_increment_gb:i}});return r&&(0,S.H4)(r),n}let I=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.jE)();return(0,P.n)(e=>k(e),{async onSuccess(t,a,i){let{projectRef:n}=a;await s.invalidateQueries(N.n.diskAutoscaleConfig(n)),await (null==e?void 0:e(t,a,i))},async onError(e,a,s){void 0===t?h.oR.error("Failed to update disk autoscale config: ".concat(e.message)):t(e,a,s)},...a})};async function D(e,t){let{projectRef:a}=e;if(!a)throw Error("Project ref is required");let{data:s,error:i}=await (0,S.Jt)("/platform/projects/{ref}/disk/util",{params:{path:{ref:a}},signal:t});return i&&(0,S.H4)(i),s}let T=function(e){let{projectRef:t}=e,{enabled:a=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.I)(N.n.diskUtilization(t),e=>{let{signal:a}=e;return D({projectRef:t},a)},{enabled:a&&void 0!==t,...s})};var C=a(34262),_=a(71433),V=a(69603),R=a(55307),M=a(96033),O=a(65904),A=a(25718),B=a(58897),F=a(85669),G=a(16601),E=a(16580),Z=a(79193),L=a(2),Y=a(82942),q=a(38952);let H=e=>{let{formState:t}=e;return(0,s.jsx)(l.N,{mode:"wait","data-sentry-element":"AnimatePresence","data-sentry-component":"FormFooterChangeBadge","data-sentry-source-file":"FormFooterChangeBadge.tsx",children:Object.keys(t.dirtyFields).length>0&&(0,s.jsx)(o.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,s.jsx)(o.P.div,{animate:{scale:[1,1.05,1],transition:{duration:.3}},children:(0,s.jsx)(q.E,{variant:"default",children:(0,s.jsx)(o.P.span,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"text-sm",children:1===Object.keys(t.dirtyFields).length?"1 change to review":"".concat(Object.keys(t.dirtyFields).length," changes to review")},Object.keys(t.dirtyFields).length)})})})})};var U=a(39353),W=a(49495),$=a(60937);let J=U.z.object({storageType:U.z.enum(["io2","gp3"]).describe("Type of storage: io2 or gp3"),totalSize:U.z.number().int("Value must be an integer").describe("Allocated disk size in GB"),provisionedIOPS:U.z.number().describe("Provisioned IOPS for storage type"),throughput:U.z.number().optional().describe("Throughput in MB/s for gp3"),computeSize:U.z.custom(e=>!0).describe("Compute size"),growthPercent:U.z.number().int("Value must be an integer").min(10,"Growth percent must be at least 10%").max(100,"Growth percent cannot exceed 100%").optional().nullable(),minIncrementGb:U.z.number().int("Value must be an integer").min(1,"Minimum increment must be at least 1 GB").max(200,"Minimum increment cannot exceed 200 GB").optional().nullable(),maxSizeGb:U.z.number().int("Value must be an integer").max(6e4,"Maximum size cannot exceed 60TB").optional().nullable()}),X=(e,t)=>{let a="FLY"===t;return J.superRefine((t,s)=>{let{storageType:i,totalSize:n,provisionedIOPS:r,throughput:l,maxSizeGb:o}=t;if(!a&&n<8&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"Allocated disk size must be at least 8 GB.",path:["totalSize"]}),!a&&n<e&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"Disk size cannot be reduced in size. Reduce your database size and then head to the Infrastructure settings and go through a Postgres version upgrade to right-size your disk.",path:["totalSize"]}),!a&&o&&o<n&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"Max disk size cannot be lower than the current disk size. Must be at least ".concat((0,W.ZV)(n)," GB."),path:["maxSizeGb"]}),!a&&"io2"===i){r>$.No[$.y6.IO2].maxIops&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"IOPS can not exceed ".concat((0,W.ZV)($.No[$.y6.IO2].maxIops)," for io2 Disk type. Please reach out to support if you need higher IOPS than this."),path:["provisionedIOPS"]});let e=(0,W.Fu)(n);if(r<$.No[$.y6.IO2].minIops)s.addIssue({code:U.z.ZodIssueCode.custom,message:"Provisioned IOPS must be at least ".concat((0,W.ZV)($.No[$.y6.IO2].minIops)),path:["provisionedIOPS"]});else if(r>e)if(n>=8){let t=(0,W.it)(r);t>n&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"Larger Disk size of at least ".concat((0,W.ZV)(t)," GB required. Current max is ").concat((0,W.ZV)(e)," IOPS."),path:["provisionedIOPS"]})}else s.addIssue({code:U.z.ZodIssueCode.custom,message:"Invalid IOPS value due to small disk size",path:["provisionedIOPS"]});void 0!==l&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"Throughput is not configurable for io2.",path:["throughput"]}),n>$.No[$.y6.IO2].maxStorage&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"Allocated disksize must not exceed ".concat((0,W.ZV)($.No[$.y6.IO2].maxStorage)," GB "),path:["totalSize"]})}if(!a&&"gp3"===i){let e=(0,W.HE)(n);if(r>$.No[$.y6.GP3].maxIops&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"IOPS can not exceed ".concat((0,W.ZV)($.No[$.y6.GP3].maxIops)," for GP3 Disk. Change the Disk type to io2 for higher IOPS support."),path:["provisionedIOPS"]}),r<$.No[$.y6.GP3].minIops)s.addIssue({code:U.z.ZodIssueCode.custom,message:"IOPS must be at least ".concat((0,W.ZV)($.No[$.y6.GP3].minIops)),path:["provisionedIOPS"]});else if(r>e)if(n>=8){let t=(0,W.CQ)(r);s.addIssue({code:U.z.ZodIssueCode.custom,message:"Larger Disk size of at least ".concat((0,W.ZV)(t)," GB required. Current max is ").concat((0,W.ZV)(e)," IOPS."),path:["provisionedIOPS"]})}else s.addIssue({code:U.z.ZodIssueCode.custom,message:"Invalid IOPS value due to invalid disk size",path:["provisionedIOPS"]});if(void 0!==l){let e=Math.min(.25*r,1e3);if(l>$.No.gp3.maxThroughput&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"Throughput can not exceed ".concat((0,W.ZV)(e)," MB/s"),path:["throughput"]}),l>e){let e=(0,W.a6)(l);s.addIssue({code:U.z.ZodIssueCode.custom,message:"Need at least ".concat((0,W.ZV)(e)," IOPS to support ").concat((0,W.ZV)(l)," MB/s."),path:["throughput"]})}l<$.No[$.y6.GP3].minThroughput&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"Throughput must be at least ".concat((0,W.ZV)($.No[$.y6.GP3].minThroughput)," MB/s"),path:["throughput"]})}n>$.No[$.y6.GP3].maxStorage&&s.addIssue({code:U.z.ZodIssueCode.custom,message:"Allocated disksize must not exceed ".concat((0,W.ZV)($.No[$.y6.GP3].maxStorage)," GB"),path:["totalSize"]})}})};var Q=a(65063),K=a(34587),ee=a(55739);let et=e=>{let{visible:t,title:a,description:i}=e;return(0,s.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskMangementRestartRequiredSection","data-sentry-source-file":"DiskManagementRestartRequiredSection.tsx",children:t&&(0,s.jsx)(o.P.div,{initial:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},className:"w-full",children:(0,s.jsxs)(K.OO,{className:"bg-surface-100 text-sm text-foreground-light flex items-center gap-4 relative w-full rounded-md border-spacing-0 border",children:[(0,s.jsx)("div",{className:"w-12 h-12",children:(0,s.jsxs)("div",{className:"relative w-10 h-10 m-1 bg-alternative text-foreground border rounded-full flex items-center justify-center",children:[(0,s.jsx)(Q.A,{strokeWidth:1}),(0,s.jsx)(ee.id,{className:"absolute -right-1.5 -top-1.5"})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-0 flex-grow",children:[(0,s.jsx)("p",{className:"text-sm text-foreground",children:a}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:i})]})]})})})};var ea=a(79319),es=a(90206),ei=a(20969),en=a(98883),er=a(3732);let el=e=>{let{beforePrice:t,afterPrice:a,show:i,tooltip:n,className:r,free:c}=e;return(0,s.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"BillingChangeBadge","data-sentry-source-file":"BillingChangeBadge.tsx",children:void 0!==t&&void 0!==a&&i&&(0,s.jsx)(o.P.div,{initial:{opacity:0,x:-4,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-4,height:0},transition:{type:"spring",stiffness:800,damping:40,duration:.3},children:(0,s.jsx)(q.E,{variant:"default",className:(0,L.cn)(c?"bg-violet-200 border-violet-900 text-violet-1100":"bg-alternative","bg-opacity-100 text-warning",r),children:(0,s.jsxs)(er.m_,{children:[(0,s.jsx)(er.k$,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-xs font-mono text-foreground-muted",children:(0,es.vv)(t)}),(0,s.jsx)(d.A,{size:12,strokeWidth:2,className:"text-foreground-muted"}),(0,s.jsx)(o.P.span,{className:(0,L.cn)(c?"text-violet-1100":"text-foreground","text-xs font-mono"),animate:{scale:[1,1.1,1]},transition:{duration:.12},children:"".concat((0,es.vv)(a),"/month")},a)]})}),void 0!==n&&(0,s.jsx)(er.ZI,{side:"bottom",children:n})]})})})})};var eo=a(69397),ed=a(58677),ec=a(78543),eu=a(2513);let em={timeRemaining:{label:"timeRemaining",color:"hsl(var(--warning-default))"},hand:{label:"hand",color:"hsl(var(--warning-default))"}},ep=e=>{let{progress:t}=e;return(0,s.jsxs)("div",{className:"relative w-12 h-12","data-sentry-component":"CountdownTimerRadial","data-sentry-source-file":"CountdownTimerRadial.tsx",children:[(0,s.jsx)(eu.at,{config:em,className:"absolute w-12 h-12","data-sentry-element":"ChartContainer","data-sentry-source-file":"CountdownTimerRadial.tsx",children:(0,s.jsxs)(eo.D,{data:[{timeRemaining:100,fill:"var(--color-timeRemaining)"}],startAngle:90,endAngle:90-360*t/100,innerRadius:21,outerRadius:14,"data-sentry-element":"RadialBarChart","data-sentry-source-file":"CountdownTimerRadial.tsx",children:[(0,s.jsx)(ed.z,{gridType:"circle",radialLines:!1,stroke:"none",className:"first:fill-foreground-muted/50 last:fill-background-200",polarRadius:[16,11],"data-sentry-element":"PolarGrid","data-sentry-source-file":"CountdownTimerRadial.tsx"}),(0,s.jsx)(ec.Z,{dataKey:"timeRemaining",cornerRadius:2,"data-sentry-element":"RadialBar","data-sentry-source-file":"CountdownTimerRadial.tsx"})]})}),(0,s.jsx)(eu.at,{config:em,className:"absolute top-1 left-1 w-10 h-10","data-sentry-element":"ChartContainer","data-sentry-source-file":"CountdownTimerRadial.tsx",children:(0,s.jsx)(eo.D,{data:[{hand:100,fill:"var(--color-hand)"}],startAngle:80-360*t/100,endAngle:140-360*t/100,innerRadius:14,outerRadius:5,"data-sentry-element":"RadialBarChart","data-sentry-source-file":"CountdownTimerRadial.tsx",children:(0,s.jsx)(ec.Z,{dataKey:"hand",cornerRadius:2,isAnimationActive:!0,"data-sentry-element":"RadialBar","data-sentry-source-file":"CountdownTimerRadial.tsx"})})})]})},eh=e=>{let{visible:t}=e,[a,i]=(0,m.useState)(100),[n,r]=(0,m.useState)(!1),[d,c]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{let e=()=>{r(!0),i(100);let t=setInterval(()=>{i(a=>a<=0?(clearInterval(t),c(!0),setTimeout(()=>{c(!1),i(100),e()},300),0):a-1)},100);return()=>clearInterval(t)},t=setTimeout(e,1e3);return()=>clearTimeout(t)},[]),(0,s.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskMangementCoolDownSection","data-sentry-source-file":"DiskManagementCoolDownSection.tsx",children:t&&(0,s.jsx)(o.P.div,{initial:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},className:"w-full",children:(0,s.jsxs)(K.OO,{className:"bg-surface-100 text-sm text-foreground-light flex items-center gap-4 relative w-full border rounded-md",children:[(0,s.jsx)("div",{className:"w-12 h-12",children:(0,s.jsx)(l.N,{children:n&&(0,s.jsx)(o.P.div,{initial:{scale:.8,opacity:0,y:-8},animate:{scale:d?1.2:1,opacity:1,y:d?-8:0},exit:{scale:.8,opacity:0,y:-8},transition:{duration:d?.3:.8,type:"spring",bounce:.6},children:(0,s.jsx)(ep,{progress:a})},"countdown-timer")})}),(0,s.jsxs)("div",{className:"flex flex-col gap-0 flex-grow",children:[(0,s.jsx)("p",{className:"text-sm text-foreground",children:"For 6 hours you will not be able to change any disk attributes."}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"There is a cooldown period enforced for any disk attribute modifications"})]})]})})})},ex=()=>(0,s.jsxs)(ei.Hj,{"data-sentry-element":"TableRow","data-sentry-component":"TableHeaderRow","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,s.jsx)(ei.nd,{className:"w-[140px] pl-5","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Disk attribute"}),(0,s.jsx)(ei.nd,{className:"text-right","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"-"}),(0,s.jsx)(ei.nd,{className:"w-[100px]","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Unit"}),(0,s.jsx)(ei.nd,{className:"text-right pr-5","data-sentry-element":"TableHead","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Price Change"})]}),eg=e=>{let{attribute:t,defaultValue:a,newValue:i,unit:n,beforePrice:r,afterPrice:l,hidePrice:o=!1,priceTooltip:c,upgradeIncluded:u=!1}=e;return(0,s.jsxs)(ei.Hj,{"data-sentry-element":"TableRow","data-sentry-component":"TableDataRow","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,s.jsx)(ei.nA,{className:"pl-5","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:(0,s.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,s.jsx)("span",{children:t})})}),(0,s.jsx)(ei.nA,{className:"text-right font-mono","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:a!==i?(0,s.jsx)(q.E,{variant:"default",className:"bg-alternative bg-opacity-100",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-xs font-mono text-foreground-muted",children:a.toString()}),(0,s.jsx)(d.A,{size:12,strokeWidth:2,className:"text-foreground-muted"}),(0,s.jsx)("span",{className:"text-xs font-mono text-foreground",children:i.toString()})]})}):(0,s.jsxs)("span",{className:"text-xs font-mono",children:[(0,s.jsx)("span",{className:"text-foreground-muted"}),a]})}),(0,s.jsx)(ei.nA,{className:"text-xs font-mono","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:n}),(0,s.jsx)(ei.nA,{className:"text-right pr-5","data-sentry-element":"TableCell","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:!u&&o?(0,s.jsx)("span",{className:"text-xs font-mono",children:"-"}):r!==l||u?(0,s.jsx)(el,{show:!0,beforePrice:r,afterPrice:l,tooltip:c,free:u}):(0,s.jsx)("span",{className:"text-xs font-mono",children:(0,es.vv)(r)})})]})},ef=e=>{var t,a,i,r,l,o,d,c,u,p,h,x,f,y,v,j,b,S,N,w,z,P,k,I,D,T,C,_,V,M,B,F,E,Z,L,Y,q,H,U,J,X,Q,es,er;let{isDialogOpen:el,setIsDialogOpen:eo,disabled:ed,form:ec,numReplicas:eu,loading:em,onSubmit:ep,message:ef,buttonSize:ey="medium"}=e,{project:ev}=(0,g.Om)(),ej=(0,A.a)(),{formState:eb,getValues:eS}=ec,eN=(0,O.SE)(n.aG.UPDATE,"projects",{resource:{project_id:null==ev?void 0:ev.id}}),{data:ew}=(0,R.Q)({projectRef:null==ev?void 0:ev.ref}),ez=null!=(B=null==ej?void 0:ej.plan.id)?B:"free",eP=!!Object.keys(ec.formState.dirtyFields).length,ek="Price change includes primary database and ".concat(eu," replica").concat(eu>1?"s":""),eI=(0,m.useMemo)(()=>{var e;return null!=(e=null==ew?void 0:ew.available_addons)?e:[]},[ew]),eD=(0,m.useMemo)(()=>(0,W.$C)(eI,null==ev?void 0:ev.cloud_provider),[eI,null==ev?void 0:ev.cloud_provider]),eT=(0,W.Uk)({availableOptions:eD,oldComputeSize:(null==(t=ec.formState.defaultValues)?void 0:t.computeSize)||"ci_micro",newComputeSize:ec.getValues("computeSize"),plan:null!=(F=null==ej?void 0:ej.plan.id)?F:"free"}),eC=(0,W.WC)({planId:ez,oldSize:(null==(a=eb.defaultValues)?void 0:a.totalSize)||0,oldStorageType:null==(i=eb.defaultValues)?void 0:i.storageType,newSize:eS("totalSize"),newStorageType:eS("storageType"),numReplicas:eu}),e_=(0,W.t5)({oldStorageType:null==(r=ec.formState.defaultValues)?void 0:r.storageType,oldProvisionedIOPS:(null==(l=ec.formState.defaultValues)?void 0:l.provisionedIOPS)||0,newStorageType:ec.getValues("storageType"),newProvisionedIOPS:ec.getValues("provisionedIOPS"),numReplicas:eu}),eV=(0,W.ou)({storageType:ec.getValues("storageType"),newThroughput:ec.getValues("throughput")||0,oldThroughput:(null==(o=ec.formState.defaultValues)?void 0:o.throughput)||0,numReplicas:eu}),eR=(null==(d=ec.formState.defaultValues)?void 0:d.computeSize)!==ec.getValues("computeSize"),eM=(null==(c=ec.formState.defaultValues)?void 0:c.totalSize)!==ec.getValues("totalSize"),eO=(null==(u=ec.formState.defaultValues)?void 0:u.storageType)!==ec.getValues("storageType"),eA=(null==(p=ec.formState.defaultValues)?void 0:p.throughput)!==ec.getValues("throughput"),eB=(null==(h=ec.formState.defaultValues)?void 0:h.provisionedIOPS)!==ec.getValues("provisionedIOPS"),eF=(null==(x=ec.formState.defaultValues)?void 0:x.growthPercent)!==ec.getValues("growthPercent"),eG=(null==(f=ec.formState.defaultValues)?void 0:f.minIncrementGb)!==ec.getValues("minIncrementGb"),eE=(null==(y=ec.formState.defaultValues)?void 0:y.maxSizeGb)!==ec.getValues("maxSizeGb"),eZ=eB||eA&&"gp3"===ec.getValues("storageType")||eM;return(0,s.jsxs)(K.lG,{open:el,onOpenChange:eo,"data-sentry-element":"Dialog","data-sentry-component":"DiskManagementReviewAndSubmitDialog","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,s.jsx)(K.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:(0,s.jsx)(ea.G,{size:ey,htmlType:"submit",type:"primary",onClick:async e=>{e.preventDefault(),await ec.trigger()&&eo(!0)},disabled:ed||!eP,tooltip:{content:{side:"bottom",text:eN?ed?"Current form values are invalid":void 0:"You need additional permissions to update disk configuration"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Review changes"})}),(0,s.jsxs)(K.Cf,{className:"min-w-[620px]","data-sentry-element":"DialogContent","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,s.jsxs)(K.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,s.jsx)(K.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Review changes"}),(0,s.jsx)(K.rr,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Changes will be applied shortly once confirmed."})]}),(0,s.jsx)(K.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx"}),(eR||eZ)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 p-5",children:[(0,s.jsx)(et,{visible:eR,title:"Resizing your Compute will trigger a project restart",description:"Project will restart automatically on confirmation."}),(0,s.jsx)(eh,{visible:eZ})]}),(0,s.jsx)(K.pf,{})]}),(0,s.jsxs)(ei.XI,{"data-sentry-element":"Table","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,s.jsx)(ei.A0,{className:"font-mono uppercase text-xs [&_th]:h-auto [&_th]:pb-2 [&_th]:pt-4","data-sentry-element":"TableHeader","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:(0,s.jsx)(ex,{"data-sentry-element":"TableHeaderRow","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx"})}),(0,s.jsxs)(ei.BF,{className:"[&_td]:py-0 [&_tr]:h-[50px] [&_tr]:border-dotted","data-sentry-element":"TableBody","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[eR&&(0,s.jsx)(eg,{attribute:"Compute size",defaultValue:(0,W.ku)(null!=(E=null==(v=ec.formState.defaultValues)?void 0:v.computeSize)?E:"ci_nano"),newValue:(0,W.ku)(ec.getValues("computeSize")),unit:"-",beforePrice:Number(eT.oldPrice),afterPrice:Number(eT.newPrice),upgradeIncluded:(null==ej?void 0:ej.plan.id)!=="free"&&(null==ev?void 0:ev.infra_compute_size)==="nano"&&"ci_micro"===ec.getValues("computeSize")}),eO&&(0,s.jsx)(eg,{hidePrice:!0,attribute:"Storage Type",defaultValue:null!=(Z=null==(j=ec.formState.defaultValues)?void 0:j.storageType)?Z:"",newValue:ec.getValues("storageType"),unit:"-",beforePrice:0,afterPrice:0}),(eB||eO)&&(0,s.jsx)(eg,{attribute:"IOPS",defaultValue:null!=(L=null==(S=ec.formState.defaultValues)||null==(b=S.provisionedIOPS)?void 0:b.toLocaleString())?L:0,newValue:null==(N=ec.getValues("provisionedIOPS"))?void 0:N.toLocaleString(),unit:"IOPS",beforePrice:Number(e_.oldPrice),afterPrice:Number(e_.newPrice),priceTooltip:eu>0?ek:void 0}),"gp3"===ec.getValues("storageType")&&eA&&(0,s.jsx)(eg,{attribute:"Throughput",defaultValue:null!=(Y=null==(z=ec.formState.defaultValues)||null==(w=z.throughput)?void 0:w.toLocaleString())?Y:0,newValue:null!=(q=null==(P=ec.getValues("throughput"))?void 0:P.toLocaleString())?q:0,unit:"MB/s",beforePrice:Number(eV.oldPrice),afterPrice:Number(eV.newPrice),priceTooltip:eu>0?ek:void 0}),(eM||eO)&&(0,s.jsx)(eg,{attribute:"Disk size",defaultValue:null!=(H=null==(I=ec.formState.defaultValues)||null==(k=I.totalSize)?void 0:k.toLocaleString())?H:0,newValue:null==(D=ec.getValues("totalSize"))?void 0:D.toLocaleString(),unit:"GB",beforePrice:Number(eC.oldPrice),afterPrice:Number(eC.newPrice),priceTooltip:eu>0?ek:void 0}),eF&&(0,s.jsx)(eg,{attribute:"Growth percent",defaultValue:null!=(U=null==(T=ec.formState.defaultValues)?void 0:T.growthPercent)?U:$.SZ.growthPercent,newValue:null!=(J=ec.getValues("growthPercent"))?J:$.SZ.growthPercent,unit:"%",beforePrice:0,afterPrice:0}),eG&&(0,s.jsx)(eg,{attribute:"Min increment",defaultValue:null!=(X=null==(C=ec.formState.defaultValues)?void 0:C.minIncrementGb)?X:$.SZ.minIncrementSize,newValue:null!=(Q=ec.getValues("minIncrementGb"))?Q:$.SZ.minIncrementSize,unit:"GB",beforePrice:0,afterPrice:0}),eE&&(0,s.jsx)(eg,{attribute:"Max disk size",defaultValue:null!=(es=null==(V=ec.formState.defaultValues)||null==(_=V.maxSizeGb)?void 0:_.toLocaleString())?es:$.SZ.maxSizeGb,newValue:null!=(er=null==(M=ec.getValues("maxSizeGb"))?void 0:M.toLocaleString())?er:$.SZ.maxSizeGb,unit:"GB",beforePrice:0,afterPrice:0})]})]}),eu>0&&(0,s.jsx)("div",{className:"border-t px-4 py-2 text-sm text-foreground-lighter",children:ek}),(0,s.jsxs)(K.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:[(0,s.jsx)(G.$,{block:!0,size:"large",type:"default",onClick:()=>eo(!1),"data-sentry-element":"Button","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Cancel"}),(0,s.jsx)(G.$,{block:!0,type:"warning",size:"large",htmlType:"submit",loading:em,onClick:async()=>{await ep(ec.getValues())},"data-sentry-element":"Button","data-sentry-source-file":"DiskManagementReviewAndSubmitDialog.tsx",children:"Confirm changes"})]}),ef&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K.pf,{}),(0,s.jsx)(K.OO,{children:(0,s.jsxs)(en.Fc,{variant:"error"===ef.type?"destructive":"default",className:"",children:[(0,s.jsx)(ee.id,{}),(0,s.jsx)(en.XL,{children:ef.message})]})})]})]})]})};var ey=a(49189),ev=a(81250),ej=a(27787);let eb=function(e){let{message:t="error",type:a,children:i}=e;return(0,s.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"FormMessage","data-sentry-source-file":"FormMessage.tsx",children:t&&(0,s.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,s.jsx)(Y.Z,{type:"error"===a?"destructive":"default",className:"mt-2",title:t,children:i})})})},eS=(0,m.forwardRef)((e,t)=>{let{children:a,label:i}=e;return(0,s.jsxs)("div",{ref:t,className:"flex -space-x-px",children:[a,(0,s.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:i})})]})});eS.displayName="InputPostTab";let eN=e=>{let{form:t}=e,{ref:a}=(0,x.g)(),{control:i,setValue:n,formState:{errors:r}}=t,{totalSize:l,growthPercent:o,maxSizeGb:d,minIncrementGb:c}=t.watch(),{error:u,isLoading:m,isError:p}=z({projectRef:a}),h=null!=o?o:$.SZ.growthPercent,g=null!=c?c:$.SZ.minIncrementSize,f=r.maxSizeGb?$.SZ.maxSizeGb:null!=d?d:$.SZ.maxSizeGb,y=Math.floor(h/100*l),v=Math.min(Math.max(Math.floor(l*h/100),g),200)+l,j=v<f?v:f,b=j-l;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.zB,{name:"growthPercent",control:i,render:e=>{var t;let{field:a}=e;return(0,s.jsxs)(ej.M,{layout:"horizontal",label:"Autoscale growth percent",id:a.name,labelOptional:"Percentage of current disk size to grow",description:r.growthPercent?void 0:"This amounts to ".concat(y," GB based on the current disk size of ").concat(l," GB"),className:"[&>div>span]:text-foreground-lighter",children:[(0,s.jsx)(eS,{label:"%",children:m?(0,s.jsx)("div",{className:(0,L.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,s.jsx)(ev.E,{className:"w-10 h-4"})}):(0,s.jsx)(F.MJ,{children:(0,s.jsx)(ey.p,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-20",value:null!=(t=a.value)?t:void 0,disabled:p,onChange:e=>{n("growthPercent",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String($.SZ.growthPercent)})})}),u&&(0,s.jsx)(eb,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,s.jsx)(F.zB,{name:"minIncrementGb",control:i,render:e=>{var t;let{field:a}=e;return(0,s.jsxs)(ej.M,{layout:"horizontal",label:"Minimum increment",id:a.name,labelOptional:"Minimum value to autoscale disk size by",description:c&&c>y&&!r.minIncrementGb?"This value takes precedence as the minimum increment is larger than the growth percent":void 0,className:"[&>div>span]:text-foreground-lighter",children:[(0,s.jsx)(eS,{label:"GB",children:m?(0,s.jsx)("div",{className:(0,L.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,s.jsx)(ev.E,{className:"w-10 h-4"})}):(0,s.jsx)(F.MJ,{children:(0,s.jsx)(ey.p,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:null!=(t=a.value)?t:void 0,disabled:p,onChange:e=>{n("minIncrementGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String($.SZ.minIncrementSize)})})}),u&&(0,s.jsx)(eb,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,s.jsx)(F.zB,{name:"maxSizeGb",control:i,render:e=>{var t;let{field:a}=e;return(0,s.jsxs)(ej.M,{layout:"horizontal",label:"Maximum disk size",id:a.name,labelOptional:"Maximum size that the disk can grow to",className:"[&>div>span]:text-foreground-lighter",children:[(0,s.jsx)(eS,{label:"GB",children:m?(0,s.jsx)("div",{className:(0,L.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,s.jsx)(ev.E,{className:"w-10 h-4"})}):(0,s.jsx)(F.MJ,{children:(0,s.jsx)(ey.p,{...a,type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",value:null!=(t=a.value)?t:void 0,disabled:p,onChange:e=>{n("maxSizeGb",""===e.target.value?null:e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},placeholder:String($.SZ.maxSizeGb)})})}),u&&(0,s.jsx)(eb,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AutoScaleFields.tsx"}),(0,s.jsxs)(Y.Z,{type:"default",showIcon:!1,className:"[&>div]:text-foreground-light",children:["Disk size will automatically be expanded by"," ",(0,s.jsxs)("span",{className:"text-foreground",children:[String(b).length>4?b.toFixed(2):b," ","GB"]})," ","to a total of ",(0,s.jsxs)("span",{className:"text-foreground",children:[j," GB"]})," ","when the database reaches 90% of the disk size"]})]})};var ew=a(26629),ez=a(26004),eP=a(60824),ek=a(59129),eI=a(24591),eD=a(52839),eT=a(72033),eC=a(7357);function e_(e){var t,a,i,n;let{form:r,disabled:l}=e,{ref:o}=(0,x.g)(),d=(0,A.a)(),{control:c,formState:p,setValue:h,trigger:f}=r,{project:v,isLoading:j}=(0,g.Om)(),{data:b,isLoading:S,error:N}=(0,R.Q)({projectRef:o}),w=j||S,z=(0,m.useMemo)(()=>{var e;return null!=(e=null==b?void 0:b.available_addons)?e:[]},[b]),P=(0,m.useMemo)(()=>(0,W.$C)(z,null==v?void 0:v.cloud_provider),[z,null==v?void 0:v.cloud_provider]),k=null==b?void 0:b.selected_addons.find(e=>"pitr"===e.type),I=(0,W.Uk)({availableOptions:P,oldComputeSize:(null==(t=r.formState.defaultValues)?void 0:t.computeSize)||"ci_micro",newComputeSize:r.getValues("computeSize"),plan:null!=(a=null==d?void 0:d.plan.id)?a:"free"}),D=(0,W.QV)(null!=(i=null==d?void 0:d.plan.id)?i:"free",null!=(n=null==v?void 0:v.infra_compute_size)?n:"nano");return(0,s.jsx)(F.zB,{name:"computeSize",control:c,render:e=>{let{field:t}=e;return(0,s.jsx)(eD.p,{...t,onValueChange:e=>{h("computeSize",e,{shouldDirty:!0,shouldValidate:!0}),f("provisionedIOPS"),f("throughput")},defaultValue:t.value,disabled:l,children:(0,s.jsx)(ej.M,{layout:"horizontal",label:"Compute size",id:t.name,className:"gap-5",labelOptional:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(el,{className:"mb-2",show:p.isDirty&&p.dirtyFields.computeSize&&!p.errors.computeSize,beforePrice:Number(I.oldPrice),afterPrice:Number(I.newPrice),free:!!D&&"ci_micro"===r.watch("computeSize")}),(0,s.jsx)("p",{className:"text-foreground-lighter",children:"Hardware resources allocated to your Postgres database"}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(y.A,{abbrev:!1,href:"https://supabase.com/docs/guides/platform/compute-and-disk"})}),(0,s.jsx)(eC.Y,{showIcon:!1,type:"default",className:"mt-3 border-violet-900 bg-violet-200 [&_h5]:text-violet-1100",visible:D&&"ci_nano"===r.watch("computeSize"),title:"Upgrade to Micro Compute",description:"This Project is already paying for Micro Compute. You can upgrade to Micro Compute at any time when convenient."})]}),children:(0,s.jsx)("div",{className:N?"":"grid gap-4 grid-cols-[repeat(auto-fit,minmax(min(100%,13em),1fr))]",children:w?Array(10).fill(0).map((e,t)=>(0,s.jsx)(ev.E,{className:"w-full h-[110px] rounded-md"},t)):N?(0,s.jsx)(eb,{message:"Failed to load Compute size options",type:"error",children:(0,s.jsx)("p",{children:null==N?void 0:N.message})}):(0,s.jsxs)(s.Fragment,{children:[P.map(e=>{var t,a,i,n,r,o;let c=(0,eI.g)(null==v?void 0:v.cloud_provider),u="ci_micro"===e.identifier&&!!k,m=(null==d?void 0:d.plan.id)!=="free"&&(null==v?void 0:v.infra_compute_size)!=="nano"&&"ci_nano"===e.identifier||u,p=(null==d?void 0:d.plan.id)!=="free"&&(null==v?void 0:v.infra_compute_size)==="nano"&&"ci_nano"===e.identifier?null==(t=P.find(e=>"ci_micro"===e.identifier))?void 0:t.price:e.price;return(0,s.jsx)(eD.e,{showIndicator:!1,id:e.identifier,value:e.identifier,className:(0,L.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]",m&&"opacity-50"),disabled:l||m,label:(0,s.jsxs)(er.m_,{children:[(0,s.jsx)(er.k$,{asChild:!0,children:(0,s.jsxs)("div",{children:[D&&"ci_micro"===e.identifier&&(0,s.jsx)("div",{className:"absolute -top-4 -right-3 text-violet-1100 flex items-center gap-1 bg-surface-75 py-0.5 px-2 rounded-full border border-violet-900",children:(0,s.jsx)("span",{children:"No additional charge"})}),(0,s.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,s.jsxs)("div",{className:"relative px-3 opacity-50 group-data-[state=checked]:opacity-100 flex justify-between",children:[(0,s.jsx)(eT.R,{className:"inline-flex font-semibold",infraComputeSize:e.name}),(0,s.jsx)("div",{className:"flex items-center space-x-1",children:m?(0,s.jsx)("div",{className:"bg border rounded-lg h-7 w-7 flex items-center justify-center",children:(0,s.jsx)(ew.A,{size:14})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-foreground text-sm font-semibold",children:["$",p]}),(0,s.jsxs)("span",{className:"text-foreground-light translate-y-[1px]",children:[" ","/"," ","monthly"===e.price_interval?"month":"hour"]})]})})]}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,s.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,s.jsx)(ez.A,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,s.jsxs)("span",{children:["ci_nano"===e.identifier&&"Up to ",null!=(r=null==(a=e.meta)?void 0:a.memory_gb)?r:0," GB memory"]})]}),(0,s.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,s.jsx)(eP.A,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,s.jsxs)("span",{children:[null!=(o=null==(i=e.meta)?void 0:i.cpu_cores)?o:0,(null==(n=e.meta)?void 0:n.cpu_cores)!=="Shared"&&"-core ".concat(c)," ","CPU"]})]})]})})]})]})}),u&&(0,s.jsxs)(er.ZI,{side:"bottom",className:"w-64 text-center",children:["Project has PITR enabled which requires a minimum of Small compute. Please"," ",(0,s.jsx)(ek.g,{href:"/project/_/settings/addons?panel=pitr",children:"disable PITR"})," ","first before selecting Micro"]})]})},e.identifier)}),(0,s.jsx)(eD.e,{id:"larger-compute",showIndicator:!1,value:"larger-compute",onClick:e=>e.preventDefault(),className:(0,L.cn)("relative text-sm text-left flex flex-col gap-0 px-0 py-3 [&_label]:w-full group] w-full h-[110px]"),label:(0,s.jsx)(u(),{href:"/support/new?projectRef=".concat(o,"&category=sales&subject=Enquiry%20about%20larger%20instance%20sizes"),children:(0,s.jsxs)("div",{className:"w-full flex flex-col gap-3 justify-between",children:[(0,s.jsxs)("div",{className:"relative px-3 flex justify-between",children:[(0,s.jsx)(eT.R,{infraComputeSize:">16XL"}),(0,s.jsx)("div",{className:"flex items-center space-x-1 opacity-50 ",children:(0,s.jsx)("span",{className:"text-foreground-light text-sm",children:"Contact Us"})})]}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"px-3 text-sm flex flex-col gap-1",children:[(0,s.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,s.jsx)(ez.A,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,s.jsx)("span",{children:"Custom memory"})]}),(0,s.jsxs)("div",{className:"text-foreground-light flex gap-2 items-center",children:[(0,s.jsx)(eP.A,{strokeWidth:1,size:14,className:"text-foreground-lighter"}),(0,s.jsx)("span",{children:"Custom CPU"})]})]})})]})})},"larger-compute")]})})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"ComputeSizeField","data-sentry-source-file":"ComputeSizeField.tsx"})}var eV=a(53434),eR=a.n(eV),eM=a(83634),eO=a(28863);let eA=e=>{var t,a;let{isDirty:i,totalSize:n,usedSize:r,newTotalSize:d,oldStorageType:c,newStorageType:u}=e,{ref:m}=(0,x.g)(),{data:p}=(0,_.Vh)({projectRef:m}),h=(null!=p?p:[]).filter(e=>e.identifier!==m),g=n*(null==(t=$.zN[c])?void 0:t.storage),f=d*(null==(a=$.zN[u])?void 0:a.storage);return 0===h.length?null:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskManagementReadReplicas.tsx",children:i&&(0,s.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,s.jsxs)(en.Fc,{variant:"default",className:"bg-transparent",children:[(0,s.jsx)(ee.mo,{}),(0,s.jsx)(en.XL,{children:"Read replicas are provisioned with extra 25% disk size to account for WAL files"}),(0,s.jsxs)(en.TN,{children:["Each replica will have a disk size of ",d,"GB, and are billed separately",(0,s.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:h.map((e,t)=>(0,s.jsx)("li",{className:"marker:text-foreground-light",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{children:["ID: ",(0,eO.s)(e.identifier)," (",e.region,"):"]}),(0,s.jsx)(el,{show:!0,beforePrice:g,afterPrice:f})]})},t))})]})]})})})})},eB=e=>{var t,a,i,n;let{isDirty:r,oldIOPS:d,newIOPS:c,oldStorageType:u,newStorageType:m}=e,{ref:p}=(0,x.g)(),{data:h}=(0,_.Vh)({projectRef:p}),g=(null!=h?h:[]).filter(e=>e.identifier!==p),f=(d-(null==(t=$.No[u])?void 0:t.includedIops))*(null==(a=$.zN[u])?void 0:a.iops),y=(c-(null==(i=$.No[m])?void 0:i.includedIops))*(null==(n=$.zN[m])?void 0:n.iops);return 0===g.length?null:(0,s.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskManagementIOPSReadReplicas","data-sentry-source-file":"DiskManagementReadReplicas.tsx",children:r&&(0,s.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,s.jsxs)(en.Fc,{variant:"default",className:"bg-transparent",children:[(0,s.jsx)(ee.mo,{}),(0,s.jsx)(en.XL,{children:"Read replica IOPS will also be updated to the same value"}),(0,s.jsx)(en.TN,{children:(0,s.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:g.map((e,t)=>(0,s.jsx)("li",{className:"marker:text-foreground-light",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{children:["ID: ",(0,eO.s)(e.identifier)," (",e.region,"):"]}),(0,s.jsx)(el,{show:!0,beforePrice:f,afterPrice:y})]})},t))})})]})})})},eF=e=>{var t,a;let{isDirty:i,oldThroughput:n,newThroughput:r,oldStorageType:d,newStorageType:c}=e,{ref:u}=(0,x.g)(),{data:m}=(0,_.Vh)({projectRef:u}),p=(null!=m?m:[]).filter(e=>e.identifier!==u),h=d===$.y6.GP3?(n-$.No[d].includedThroughput)*(null==(t=$.zN[d])?void 0:t.throughput):0,g=c===$.y6.GP3?(r-$.No[c].includedThroughput)*(null==(a=$.zN[c])?void 0:a.throughput):0;return 0===p.length?null:(0,s.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskManagementThroughputReadReplicas","data-sentry-source-file":"DiskManagementReadReplicas.tsx",children:i&&(0,s.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,s.jsxs)(en.Fc,{variant:"default",className:"bg-transparent",children:[(0,s.jsx)(ee.mo,{}),(0,s.jsx)(en.XL,{children:"Read replica throughput will also be updated to the same value"}),(0,s.jsx)(en.TN,{children:(0,s.jsx)("ul",{className:"list-disc pl-4 my-3 flex flex-col gap-2",children:p.map((e,t)=>(0,s.jsx)("li",{className:"marker:text-foreground-light",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{children:["ID: ",(0,eO.s)(e.identifier)," (",e.region,"):"]}),(0,s.jsx)(el,{show:!0,beforePrice:h,afterPrice:g})]})},t))})})]})})})};var eG=a(79050),eE=a(89714),eZ=a(796),eL=a(77570);async function eY(e,t){let{projectRef:a,connectionString:s}=e;if(!a)throw Error("Project ref is required");if(!s)throw Error("Connection string is required");let{result:i}=await (0,eL.E)({projectRef:a,connectionString:s,sql:"\n    SELECT\n  (\n    SELECT\n      SUM(pg_database_size(pg_database.datname)) AS db_size_bytes\n    FROM\n      pg_database\n  ),\n  (\n    SELECT SUM(size)\n    FROM\n      pg_ls_waldir()\n  ) AS wal_size_bytes"},t);return i[0]}let eq=function(e){let{projectRef:t,connectionString:a}=e,{enabled:s=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,b.I)(N.n.diskBreakdown(t),e=>{let{signal:s}=e;return eY({projectRef:t,connectionString:a},s)},{enabled:s&&void 0!==t,...i})};function eH(e){var t,a,i,n,r;let{form:d}=e,{ref:c}=(0,x.g)(),{resolvedTheme:u}=(0,eZ.D)(),{formState:p,watch:h}=d,g=null==u?void 0:u.includes("dark"),f=(0,eM.KT)(),{data:y}=T({projectRef:c}),{data:v}=eq({projectRef:c,connectionString:null==f?void 0:f.connectionString}),j=(0,m.useMemo)(()=>{var e,t,a,s,i,n,r;return{availableBytes:null!=(e=null==y?void 0:y.metrics.fs_avail_bytes)?e:0,totalUsedBytes:null!=(t=null==y?void 0:y.metrics.fs_used_bytes)?t:0,totalDiskSizeBytes:null==y?void 0:y.metrics.fs_size_bytes,dbSizeBytes:Math.max(0,null!=(a=null==v?void 0:v.db_size_bytes)?a:0),walSizeBytes:Math.max(0,null!=(s=null==v?void 0:v.wal_size_bytes)?s:0),systemBytes:Math.max(0,(null!=(i=null==y?void 0:y.metrics.fs_used_bytes)?i:0)-(null!=(n=null==v?void 0:v.db_size_bytes)?n:0)-(null!=(r=null==v?void 0:v.wal_size_bytes)?r:0))}},[y,v]),b=void 0!==p.dirtyFields.totalSize&&v,S=h("totalSize"),N=(null==(t=p.defaultValues)?void 0:t.totalSize)||0,w=Math.round((null!=(a=null==j?void 0:j.totalUsedBytes)?a:0)/B.GB*100)/100,z=Math.min(w/N*100,100),P=Math.round((null!=(i=null==j?void 0:j.dbSizeBytes)?i:0)/B.GB*100)/100,k=0===N?0:Math.min(P/N*100,100),I=Math.min(P/S*100,100),D=Math.round((null!=(n=null==j?void 0:j.walSizeBytes)?n:0)/B.GB*100)/100,C=0===N?0:Math.min(D/N*100,100),_=Math.min(D/S*100,100),V=Math.round((null!=(r=null==j?void 0:j.systemBytes)?r:0)/B.GB*100)/100,R=0===N?0:Math.min(V/N*100,100),M=Math.min(V/S*100,100),O=100*$.nU,A=100*$.nU;return(0,s.jsxs)("div",{className:"flex flex-col gap-2","data-sentry-component":"DiskSpaceBar","data-sentry-source-file":"DiskSpaceBar.tsx",children:[(0,s.jsx)("div",{className:"flex items-center h-6 gap-3",children:(0,s.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[w.toFixed(2),(0,s.jsx)("span",{children:"GB used of "}),(0,s.jsx)("span",{className:"text-foreground font-semibold -mt-[2px]",children:(0,s.jsx)(eG.Ay,{value:S,style:{lineHeight:.8},className:"font-mono","data-sentry-element":"MotionNumber","data-sentry-source-file":"DiskSpaceBar.tsx"})})," ","GB"]})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:(0,L.cn)("h-[35px] relative border rounded-sm w-full transition",b?"bg-selection border border-brand-button":"bg-surface-300"),children:[(0,s.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskSpaceBar.tsx",children:(0,s.jsx)(o.P.div,{initial:{rotateY:90,zIndex:2},animate:{rotateY:0,zIndex:1},exit:{rotateY:-90,zIndex:2},transition:{duration:.3},style:{transformOrigin:"left center",backfaceVisibility:"hidden"},className:"absolute inset-0 rounded-sm overflow-hidden","data-sentry-element":"unknown","data-sentry-source-file":"DiskSpaceBar.tsx",children:(0,s.jsxs)("div",{className:"h-full flex",children:[(0,s.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-foreground",style:{width:"".concat(b?I:k,"%")},children:(0,s.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(\n                            -45deg,\n                            ".concat(g?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.1)",",\n                            ").concat(g?"rgba(0,0,0,0.1) 1px":"rgba(255,255,255,0.1) 1px",",\n                            transparent 1px,\n                            transparent 4px\n                          )")}})}),(0,s.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-_secondary",style:{width:"".concat(b?_:C,"%")}}),(0,s.jsx)("div",{className:"relative overflow-hidden transition-all duration-500 ease-in-out bg-destructive-500",style:{width:"".concat(b?M:R,"%")}}),!b&&(0,s.jsx)("div",{className:"bg-transparent-800 border-r transition-all duration-500 ease-in-out",style:{width:"".concat(O-z<=0?0:O-z,"%")}})]})},"currentBar")}),(0,s.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskSpaceBar.tsx",children:b&&(0,s.jsx)(o.P.span,{initial:{opacity:0,x:4},animate:{opacity:1,x:0},exit:{opacity:0,x:4},transition:{duration:.12,delay:.12},className:(0,L.cn)((0,q.e)({variant:"success"}),"absolute right-1 top-[5px]"),children:"New disk size"})})]}),(0,s.jsx)(l.N,{initial:!0,"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskSpaceBar.tsx",children:!b&&(0,s.jsx)(o.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.1},className:"absolute h-8 w-full -mx-[2px]",children:(0,s.jsxs)("div",{className:"absolute top-0 -left-0 h-full flex items-center transition-all duration-500 ease-in-out",style:{left:"".concat(b?A:O,"%")},children:[(0,s.jsxs)(er.m_,{children:[(0,s.jsx)(er.k$,{asChild:!0,children:(0,s.jsxs)("div",{className:"absolute right-full bottom-0 border mr-2 px-2 py-1 bg-surface-400 rounded text-xs text-foreground-light whitespace-nowrap flex items-center gap-x-1",children:["Autoscaling ",(0,s.jsx)(eE.A,{size:12})]})}),(0,s.jsxs)(er.ZI,{side:"bottom",className:"w-[310px] flex flex-col gap-y-1",children:[(0,s.jsx)("p",{children:"Supabase expands your disk storage automatically when the database reached 90% of the disk size. However, any disk modifications, including auto-scaling, can only take place once every 6 hours."}),(0,s.jsxs)("p",{children:["If within those 6 hours you reach 95% of the disk space, your project"," ",(0,s.jsx)("span",{className:"text-destructive-600",children:"will enter read-only mode."})]})]})]}),(0,s.jsx)("div",{className:"w-px h-full bg-border"})]})},"currentSize")})]}),!b&&(0,s.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-foreground-lighter",children:[(0,s.jsx)(eU,{name:"Database",size:j.dbSizeBytes,color:"bg-foreground",description:"Total space on disk used by your database (tables, indexes, data, ...)."}),(0,s.jsx)(eU,{name:"WAL",size:j.walSizeBytes,color:"bg-_secondary",description:"Total space on disk used by the write-ahead log."}),(0,s.jsx)(eU,{name:"System",size:j.systemBytes,color:"bg-destructive-500",description:"Reserved space for the system to ensure your database runs smoothly. You cannot modify this."}),(0,s.jsx)(eU,{name:"Available space",size:j.availableBytes,color:"bg-border",description:"Total available space on the disk left."})]}),(0,s.jsxs)("p",{className:"text-xs text-foreground-lighter my-4",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Note:"})," Disk Size refers to the total space your project occupies on disk, including the database itself (currently"," ",(0,s.jsx)("span",{children:(0,es.z3)(null==j?void 0:j.dbSizeBytes,2,"GB")}),"), additional files like the write-ahead log (currently"," ",(0,s.jsx)("span",{children:(0,es.z3)(null==j?void 0:j.walSizeBytes,2,"GB")}),"), and other system resources (currently ",(0,s.jsx)("span",{children:(0,es.z3)(null==j?void 0:j.systemBytes,2,"GB")}),"). Data can take 5 minutes to refresh."]})]})}let eU=e=>{let{name:t,description:a,color:i,size:n}=e;return(0,s.jsxs)(er.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"LegendItem","data-sentry-source-file":"DiskSpaceBar.tsx",children:[(0,s.jsx)(er.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"DiskSpaceBar.tsx",children:(0,s.jsxs)("div",{className:"flex items-center hover:cursor-help z-10",children:[(0,s.jsx)("div",{className:(0,L.cn)("w-2 h-2 rounded-full mr-2",i)}),(0,s.jsx)("span",{children:t})]})}),(0,s.jsxs)(er.ZI,{side:"bottom",className:"flex flex-col gap-y-1 max-w-xs","data-sentry-element":"TooltipContent","data-sentry-source-file":"DiskSpaceBar.tsx",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:(0,L.cn)("w-2 h-2 rounded-full mr-2",i)}),(0,s.jsxs)("span",{children:[t," - ",(0,es.z3)(n,2,"GB")]})]}),(0,s.jsx)("p",{children:a})]})]})};function eW(e){let{actions:t,form:a}=e,{watch:i}=a,n=i("totalSize"),r=i("storageType")===$.y6.GP3&&n>$.No[$.y6.GP3].maxStorage,d=$.EH.find(e=>e.type===$.y6.IO2);return(0,s.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskTypeRecommendationSection","data-sentry-source-file":"DiskTypeRecommendationSection.tsx",children:r&&(0,s.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,s.jsx)(Y.Z,{type:"default",title:"You will need to use ".concat(null==d?void 0:d.name," to use a larger Disk size"),children:(0,s.jsx)("div",{className:"flex flex-col gap-2",children:t&&(0,s.jsx)("div",{children:t})})})})})}function e$(e){let{isDirty:t,onClick:a}=e;return(0,s.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"InputResetButton","data-sentry-source-file":"InputResetButton.tsx",children:t&&(0,s.jsx)(o.P.div,{initial:{opacity:0,scale:.95,x:-2},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.95,x:-2},transition:{duration:.12},children:(0,s.jsx)(G.$,{htmlType:"button",type:"default",size:"small",className:"px-2 text-foreground-light",onClick:a,children:(0,s.jsx)(Q.A,{className:"h-4 w-4","aria-hidden":"true"})})},"reset-disksize")})}function eJ(e){var t,a,i,n,r,l,o;let{form:d,disableInput:c,setAdvancedSettingsOpenState:u}=e,{ref:m}=(0,x.g)(),{control:p,formState:h,setValue:g,trigger:f,getValues:j,resetField:b,watch:S}=d,N=(0,A.a)(),w=(0,eM.KT)(),{isLoading:z,error:P,isError:k}=(0,v.Gc)({projectRef:m},{enabled:w&&"FLY"!==w.cloud_provider}),{data:I,error:D,isError:C}=T({projectRef:m},{enabled:w&&"FLY"!==w.cloud_provider}),_=D||P,V=C||k,R=10>eR().utc().diff(eR().utc(null==w?void 0:w.inserted_at),"minute")||(null==w?void 0:w.status)==="COMING_UP",M=S("storageType"),O=S("totalSize"),E=null!=(r=null==N?void 0:N.plan.id)?r:"free",{includedDiskGB:Z}=null!=(l=null===$.Jh||void 0===$.Jh?void 0:$.Jh[E])?l:{},Y=Z[M],q=(0,W.WC)({planId:E,oldSize:(null==(t=h.defaultValues)?void 0:t.totalSize)||0,oldStorageType:null==(a=h.defaultValues)?void 0:a.storageType,newSize:j("totalSize"),newStorageType:j("storageType")}),H=!!h.dirtyFields.totalSize,U=Math.round((null!=(o=null==I?void 0:I.metrics.fs_used_bytes)?o:0)/B.GB*100)/100;return(0,s.jsxs)("div",{className:"grid @xl:grid-cols-12 gap-5","data-sentry-component":"DiskSizeField","data-sentry-source-file":"DiskSizeField.tsx",children:[(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(F.zB,{name:"totalSize",control:p,render:e=>{let{field:t}=e;return(0,s.jsx)(ej.M,{label:"Disk Size",layout:"vertical",id:t.name,children:(0,s.jsxs)("div",{className:"relative flex gap-2 items-center",children:[(0,s.jsx)(eS,{label:"GB",children:z?(0,s.jsx)("div",{className:(0,L.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,s.jsx)(ev.E,{className:"w-10 h-4"})}):(0,s.jsx)(F.MJ,{children:(0,s.jsx)(ey.p,{type:"number",id:t.name,...t,disabled:c||V,className:"w-32 font-mono rounded-r-none",onWheel:e=>e.currentTarget.blur(),onChange:e=>{g("totalSize",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0}),f("provisionedIOPS"),f("throughput")},min:Y})})}),(0,s.jsx)(e$,{isDirty:H,onClick:()=>{b("totalSize"),f("provisionedIOPS")}})]})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"DiskSizeField.tsx"}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(el,{className:"mt-1",beforePrice:Number(q.oldPrice),afterPrice:Number(q.newPrice),show:h.isDirty&&!h.errors.totalSize&&q.oldPrice!==q.newPrice,"data-sentry-element":"BillingChangeBadge","data-sentry-source-file":"DiskSizeField.tsx"}),(0,s.jsxs)("span",{className:"text-foreground-lighter text-sm",children:[Y>0&&(null==N?void 0:N.plan.id)&&"Your plan includes ".concat(Y," GB of disk size for ").concat(M,"."),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(y.A,{abbrev:!1,href:"https://supabase.com/docs/guides/platform/database-size","data-sentry-element":"DocsButton","data-sentry-source-file":"DiskSizeField.tsx"})})]}),(0,s.jsx)(eW,{form:d,actions:(0,s.jsx)(G.$,{type:"default",onClick:()=>{g("storageType","io2"),f("provisionedIOPS"),f("totalSize"),u(!0)},children:"Change to High Performance SSD"}),"data-sentry-element":"DiskTypeRecommendationSection","data-sentry-source-file":"DiskSizeField.tsx"})]})]}),(0,s.jsxs)("div",{className:"col-span-8",children:[(0,s.jsx)(eH,{form:d,"data-sentry-element":"DiskSpaceBar","data-sentry-source-file":"DiskSizeField.tsx"}),R?(0,s.jsx)(eb,{message:"Disk size data is not available for ~10 minutes after project creation",type:"error"}):_&&(0,s.jsx)(eb,{message:"Failed to load disk size data",type:"error",children:null==_?void 0:_.message}),(0,s.jsx)(eA,{isDirty:void 0!==h.dirtyFields.totalSize,totalSize:1.25*((null==(i=h.defaultValues)?void 0:i.totalSize)||0),usedSize:U,newTotalSize:1.25*O,oldStorageType:null==(n=h.defaultValues)?void 0:n.storageType,newStorageType:j("storageType"),"data-sentry-element":"DiskManagementDiskSizeReadReplicas","data-sentry-source-file":"DiskSizeField.tsx"})]})]})}function eX(e){let{actions:t,form:a}=e,{watch:i}=a,n=i("computeSize"),r=i("provisionedIOPS"),d=(0,W.u1)(r),c=r>(0,W.T2)(null!=n?n:"ci_micro")&&!$.JM.includes(n);return(0,s.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"ComputeSizeRecommendationSection","data-sentry-source-file":"ComputeSizeRecommendationSection.tsx",children:c&&(0,s.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.15},children:(0,s.jsx)(Y.Z,{type:"default",title:"Your Compute size can only support a baseline IOPS of ".concat($.QL[n]),children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["To achieve sustained IOPS performance we recommend using the"," ",(0,s.jsx)("span",{className:"text-foreground",children:(0,W.ku)(d)})," ","compute size."]})}),t&&(0,s.jsx)("div",{children:t})]})})})})}function eQ(e){var t,a,i;let{form:n,disableInput:r}=e,{ref:l}=(0,x.g)(),{control:o,formState:d,setValue:c,trigger:u,getValues:m,watch:p}=n,h=p("storageType"),g=p("computeSize"),f=null!=(i=p("provisionedIOPS"))?i:0,{isLoading:y,error:j,isError:b}=(0,v.Gc)({projectRef:l}),S=(0,W.t5)({oldStorageType:null==(t=d.defaultValues)?void 0:t.storageType,oldProvisionedIOPS:(null==(a=d.defaultValues)?void 0:a.provisionedIOPS)||0,newStorageType:m("storageType"),newProvisionedIOPS:m("provisionedIOPS")}),N=$.JM.includes(g)&&"gp3"===h;return(0,s.jsx)(F.zB,{control:o,name:"provisionedIOPS",render:e=>{var t,a,i,l,o;let{field:p}=e,x=(0,W.u1)(f);return(0,s.jsxs)(ej.M,{layout:"horizontal",label:"IOPS",id:p.name,description:(0,s.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,s.jsx)("p",{children:"Use higher IOPS for high-throughput apps."}),(0,s.jsx)(eX,{form:n,actions:(0,s.jsxs)(G.$,{type:"default",onClick:()=>{c("computeSize",null!=x?x:"ci_nano"),u("provisionedIOPS")},children:["Update to ",(0,W.ku)(x)]})}),!d.errors.provisionedIOPS&&(0,s.jsx)(eB,{isDirty:void 0!==d.dirtyFields.provisionedIOPS,oldIOPS:null!=(o=null==(t=d.defaultValues)?void 0:t.provisionedIOPS)?o:0,newIOPS:p.value,oldStorageType:null==(a=d.defaultValues)?void 0:a.storageType,newStorageType:m("storageType")})]}),labelOptional:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(el,{show:(h!==(null==(i=d.defaultValues)?void 0:i.storageType)||"gp3"===h&&p.value!==(null==(l=d.defaultValues)?void 0:l.provisionedIOPS))&&!d.errors.provisionedIOPS&&!N,beforePrice:Number(S.oldPrice),afterPrice:Number(S.newPrice),className:"mb-2"}),(0,s.jsx)("p",{className:"text-foreground-lighter",children:"Input/output operations per second."})]}),children:[(0,s.jsx)(eS,{label:"IOPS",children:y?(0,s.jsx)("div",{className:(0,L.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,s.jsx)(ev.E,{className:"w-10 h-4"})}):(0,s.jsx)(F.MJ,{children:(0,s.jsx)(ey.p,{type:"number",className:"flex-grow font-mono rounded-r-none max-w-32",...p,value:N?$.QL[g]:p.value,disabled:r||N||b,onChange:e=>{c("provisionedIOPS",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})}})})}),j&&(0,s.jsx)(eb,{type:"error",message:j.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"IOPSField","data-sentry-source-file":"IOPSField.tsx"})}var eK=a(79295);let e0=["ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","us-east-1","us-east-2","us-west-1","us-west-2"];function e1(e){var t;let{form:a,disableInput:i}=e,{control:n,trigger:r}=a,l=(0,eM.KT)(),{ref:o}=(0,x.g)(),d=e0.includes(null!=(t=null==l?void 0:l.region)?t:""),{isLoading:c,error:u,isError:m}=(0,v.Gc)({projectRef:o});return(0,s.jsx)(F.zB,{name:"storageType",control:n,render:e=>{let{field:t}=e;return(0,s.jsxs)(ej.M,{layout:"horizontal",label:"Storage type",children:[(0,s.jsxs)(eK.l6,{...t,onValueChange:async e=>{t.onChange(e),"gp3"===e?!a.getFieldState("provisionedIOPS").isDirty&&(!a.getValues("provisionedIOPS")||a.getValues("provisionedIOPS")<$.No[$.y6.GP3].minIops)&&a.setValue("provisionedIOPS",$.No[$.y6.GP3].minIops):!a.getFieldState("provisionedIOPS").isDirty&&(!a.getValues("provisionedIOPS")||a.getValues("provisionedIOPS")<$.No[$.y6.IO2].minIops)&&a.setValue("provisionedIOPS",$.No[$.y6.IO2].minIops),await r("provisionedIOPS"),await r("totalSize")},defaultValue:t.value,disabled:i||m,children:[c?(0,s.jsx)(ev.E,{className:(0,L.cn)((0,G.r)({size:"small"}),"h-14 min-w-[420px] duration-[2s]")}):(0,s.jsx)(F.MJ,{children:(0,s.jsx)(eK.bq,{className:"h-14 max-w-[420px]",children:(0,s.jsx)(eK.yv,{})})}),(0,s.jsx)(eK.gC,{children:(0,s.jsx)(s.Fragment,{children:$.EH.map(e=>{let t="io2"===e.type&&!d;return(0,s.jsxs)(er.m_,{children:[(0,s.jsx)(er.k$,{asChild:!0,children:(0,s.jsx)(eK.eb,{disabled:i||t,value:e.type,className:(0,L.cn)(t&&"!pointer-events-auto"),children:(0,s.jsxs)("div",{className:"flex flex-col gap-0 items-start",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)("span",{className:"text-sm text-foreground",children:e.name})," ",(0,s.jsx)("div",{children:(0,s.jsx)(q.E,{variant:"outline",className:"font-mono bg-alternative bg-opacity-100",children:e.type})})]}),(0,s.jsx)("p",{className:"text-foreground-light",children:e.description})]})},e.type)}),t&&(0,s.jsxs)(er.ZI,{side:"right",className:"w-64",children:["IO2 Volume Type is not available in your project's region (",null==l?void 0:l.region,"). More information available"," ",(0,s.jsx)(ek.g,{href:"https://docs.aws.amazon.com/ebs/latest/userguide/provisioned-iops.html#io2-bx-considerations",children:"here"}),"."]})]},e.type)})})})]}),u&&(0,s.jsx)(eb,{type:"error",message:u.message})]})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"StorageTypeField","data-sentry-source-file":"StorageTypeField.tsx"})}function e2(e){var t,a;let{form:i,disableInput:n}=e,{ref:r}=(0,x.g)(),{control:d,formState:c,setValue:u,getValues:p,watch:h}=i,g=h("storageType"),f=h("totalSize"),y=h("computeSize"),j=null==(t=c.defaultValues)?void 0:t.throughput,{isLoading:b,error:S}=(0,v.Gc)({projectRef:r}),N=(0,W.ou)({storageType:i.getValues("storageType"),newThroughput:i.getValues("throughput")||0,oldThroughput:(null==(a=i.formState.defaultValues)?void 0:a.throughput)||0}),w=$.JM.includes(y)&&"gp3"===g;return(0,m.useEffect)(()=>{if("io2"===g)u("throughput",void 0);else if("gp3"===g){let e=i.getValues("throughput"),{minThroughput:t,maxThroughput:a}=$.No[$.y6.GP3];(!e||e<t||e>a)&&u("throughput",t)}},[g,f,u,i]),(0,s.jsx)(l.N,{initial:!1,"data-sentry-element":"AnimatePresence","data-sentry-component":"ThroughputField","data-sentry-source-file":"ThroughputField.tsx",children:"gp3"===p("storageType")&&(0,s.jsx)(o.P.div,{initial:{opacity:0,x:-4,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-4,height:0},transition:{duration:.1},style:{overflow:"hidden"},children:(0,s.jsx)(F.zB,{name:"throughput",control:d,render:e=>{var t,a;let{field:i}=e;return(0,s.jsxs)(ej.M,{label:"Throughput",layout:"horizontal",description:(0,s.jsxs)("span",{className:"flex flex-col gap-y-2",children:[(0,s.jsx)("p",{children:"Higher throughput suits applications with high data transfer needs."}),!c.errors.throughput&&(0,s.jsx)(eF,{isDirty:void 0!==c.dirtyFields.throughput,oldThroughput:null!=j?j:0,newThroughput:null!=(a=i.value)?a:0,oldStorageType:null==(t=c.defaultValues)?void 0:t.storageType,newStorageType:p("storageType")})]}),labelOptional:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(el,{show:c.isDirty&&c.dirtyFields.throughput&&!c.errors.throughput,beforePrice:Number(N.oldPrice),afterPrice:Number(N.newPrice),className:"mb-2"}),(0,s.jsx)("p",{className:"text-foreground-lighter",children:"Amount of data read/written per second."})]}),children:[(0,s.jsx)(eS,{label:"MB/s",children:b?(0,s.jsx)("div",{className:(0,L.cn)((0,ey.L)({size:"small"}),"w-32 font-mono rounded-r-none"),children:(0,s.jsx)(ev.E,{className:"w-10 h-4"})}):(0,s.jsx)(F.MJ,{children:(0,s.jsx)(ey.p,{type:"number",...i,value:w?$.tt[y]:i.value,onChange:e=>{u("throughput",e.target.valueAsNumber,{shouldDirty:!0,shouldValidate:!0})},className:"flex-grow font-mono rounded-r-none max-w-32",disabled:n||w||"io2"===g})})}),S&&(0,s.jsx)(eb,{type:"error",message:S.message})]})}})},"throughPutContainer")})}let e3=e=>{let{seconds:t}=e,a=Math.floor(t/3600),i=Math.floor(t%3600/60),n={minimumIntegerDigits:2},r=e=>e.toString().padStart(2,"0");return(0,s.jsxs)("span",{className:"inline-flex gap-2","data-sentry-component":"CountdownTimerSpan","data-sentry-source-file":"CountdownTimerSpan.tsx",children:[(0,s.jsx)("span",{className:"text-foreground-lighter text-sm p-0",children:"Time remaining: "}),(0,s.jsxs)("span",{className:"text-foreground text-sm font-mono flex items-center gap-0",children:[(0,s.jsx)(eG.Ay,{format:n,value:Number(r(a)),"data-sentry-element":"MotionNumber","data-sentry-source-file":"CountdownTimerSpan.tsx"}),"hr",(0,s.jsx)(eG.Ay,{format:n,value:Number(r(i)),"data-sentry-element":"MotionNumber","data-sentry-source-file":"CountdownTimerSpan.tsx"}),"m",(0,s.jsx)(eG.Ay,{format:n,value:Number(r(t%60)),"data-sentry-element":"MotionNumber","data-sentry-source-file":"CountdownTimerSpan.tsx"})]})]})};var e6=a(46873);function e5(){let{ref:e}=(0,x.g)(),[t,a]=(0,m.useState)(0),{remainingDuration:i,error:n,isSuccess:r}=(0,v.Zj)({projectRef:e}),d=t/j.Xz*100;return(0,m.useEffect)(()=>{i>0&&a(i)},[i]),(0,m.useEffect)(()=>{if(t<=0)return;let e=setInterval(()=>{a(Math.max(0,t-1))},1e3);return()=>clearInterval(e)},[t]),(0,s.jsxs)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"DiskCountdownRadial","data-sentry-source-file":"DiskCountdownRadial.tsx",children:[t>0&&r&&(0,s.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,s.jsx)(e6.Zp,{className:"px-2 rounded bg-surface-100",children:(0,s.jsxs)(e6.Wu,{className:"py-3 flex gap-3 px-3 items-start",children:[(0,s.jsx)(ep,{progress:d}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-foreground text-sm p-0",children:"6-hour cooldown period is in progress"}),(0,s.jsx)("p",{className:"text-foreground-lighter text-sm p-0",children:"You can't modify your disk configuration again until the 6-hour cool down period ends."})]}),(0,s.jsx)(e3,{seconds:t})]})]})})}),n&&(0,s.jsx)(eb,{message:n.message,type:"error"})]})}function e4(){let e=(0,A.a)(),t=(0,eM.KT)(),a=(null==e?void 0:e.plan.id)!=="free"&&!(null==e?void 0:e.usage_billing_enabled)&&(null==t?void 0:t.cloud_provider)!=="FLY";return(0,s.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"SpendCapDisabledSection","data-sentry-source-file":"SpendCapDisabledSection.tsx",children:a&&(0,s.jsx)(o.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:(0,s.jsxs)(Y.Z,{type:"default",children:[(0,s.jsx)(en.XL,{children:"Disable spend cap to manage Disk configuration"}),(0,s.jsx)(en.TN,{children:"To access disk management features, you need to disable your spend cap. These features offer more flexibility and control over your database disk size."}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(u(),{href:"/org/".concat(null==e?void 0:e.slug,"/billing?panel=costControl"),className:(0,L.cn)((0,G.r)({type:"default",size:"tiny"})),children:"Disable spend cap"})})]})})})}function e9(){var e,t,a,c;let{project:b,isLoading:S}=(0,g.Om)(),N=(0,A.a)(),{ref:w}=(0,x.g)(),P=(0,r.jE)(),{data:k}=(0,M.p)(),D=null==(e=null!=k?k:[])?void 0:e.find(e=>e.project===(null==b?void 0:b.ref)),q=null==D?void 0:D.is_readonly_mode_enabled,U=(null==b?void 0:b.cloud_provider)==="FLY",J=(0,O.Lh)(),Q=(0,O.SE)(n.aG.UPDATE,"projects",{resource:{project_id:null==b?void 0:b.id}}),[K,ee]=(0,m.useState)(!1),[ea,es]=(0,m.useState)(!1),[ei,en]=(0,m.useState)(null),[er,el]=(0,m.useState)(!1),{data:eo,isSuccess:ed}=(0,_.Vh)({projectRef:w}),{data:ec,isSuccess:eu}=(0,v.Gc)({projectRef:w},{refetchInterval:ea,refetchOnWindowFocus:!1,onSuccess:e=>{var t;let{type:a,iops:s,throughput_mbps:i,size_gb:n}=null!=(t=null==e?void 0:e.attributes)?t:{size_gb:0};"requested_modification"in e||!1===ea||(eD.reset({storageType:a,provisionedIOPS:s,throughput:i,totalSize:n}),es(!1),h.oR.success("Disk configuration changes have been successfully applied!"))},enabled:null!=b&&!U}),{isSuccess:em}=(0,R.Q)({projectRef:w}),{isWithinCooldownWindow:ep,isSuccess:eh}=(0,v.Zj)({projectRef:w,enabled:null!=b&&!U}),{data:ex,isSuccess:eg}=T({projectRef:w},{enabled:null!=b&&!U}),{data:ey,isSuccess:ev}=z({projectRef:w},{enabled:null!=b&&!U}),{type:ej,iops:eb,throughput_mbps:eS,size_gb:ew}=null!=(a=null==ec?void 0:ec.attributes)?a:{size_gb:0,iops:0},{growth_percent:ez,max_size_gb:eP,min_increment_gb:ek}=null!=ey?ey:{},eI={storageType:null!=ej?ej:$.y6.GP3,provisionedIOPS:eb,throughput:eS,totalSize:ew,computeSize:(null==b?void 0:b.infra_compute_size)?(0,W.$6)(null==b?void 0:b.infra_compute_size):void 0,growthPercent:ez,minIncrementGb:ek,maxSizeGb:eP},eD=(0,p.mN)({resolver:(0,i.u)(X(eI.totalSize,null==b?void 0:b.cloud_provider)),defaultValues:eI,mode:"onBlur",reValidateMode:"onChange"}),eT=em&&eu&&eg&&ed&&ev&&eh,eV=(null==ec?void 0:ec.requested_modification)!==void 0,eR=(null!=eo?eo:[]).filter(e=>e.identifier!==w),eM=(null==N?void 0:N.plan.id)==="free",{formState:eO}=eD,eA=Math.round((null!=(c=null==ex?void 0:ex.metrics.fs_used_bytes)?c:0)/B.GB*100)/100,eB=(null==(t=eO.defaultValues)?void 0:t.totalSize)||0,eF=$.eQ.includes(eD.watch("computeSize"))&&(null==N?void 0:N.plan.id)!=="free",eG=(null==b?void 0:b.parent_project_ref)!==void 0,eE=eV||eM||ep||!Q||U,eZ=!!Object.keys(eD.formState.dirtyFields).length,eL=(null==b?void 0:b.status)===B.BU.RESIZING,eY=eV&&!eL,eq=J&&!Q&&!S,{mutateAsync:eH,isLoading:eU}=(0,j._J)({onError:()=>{},onSuccess:()=>es(2e3)}),{mutateAsync:eW,isLoading:e$}=(0,V.F)({onError:()=>{},onSuccess:()=>{(0,C.Mi)(P,w,B.BU.RESIZING)}}),{mutateAsync:eX,isLoading:eK}=I({onError:()=>{}}),e0=async e=>{let t=!1;en(null);try{var a,s,i,n,r,l,o,d;(e.storageType!==(null==(a=eD.formState.defaultValues)?void 0:a.storageType)||e.provisionedIOPS!==(null==(s=eD.formState.defaultValues)?void 0:s.provisionedIOPS)||e.throughput!==(null==(i=eD.formState.defaultValues)?void 0:i.throughput)||e.totalSize!==(null==(n=eD.formState.defaultValues)?void 0:n.totalSize))&&(t=!0,await eH({ref:w,provisionedIOPS:e.provisionedIOPS,storageType:e.storageType,totalSize:e.totalSize,throughput:e.throughput})),(e.growthPercent!==(null==(r=eD.formState.defaultValues)?void 0:r.growthPercent)||e.minIncrementGb!==(null==(l=eD.formState.defaultValues)?void 0:l.minIncrementGb)||e.maxSizeGb!==(null==(o=eD.formState.defaultValues)?void 0:o.maxSizeGb))&&await eX({projectRef:w,growthPercent:e.growthPercent,minIncrementGb:e.minIncrementGb,maxSizeGb:e.maxSizeGb}),e.computeSize!==(null==(d=eD.formState.defaultValues)?void 0:d.computeSize)&&await eW({projectRef:w,variant:e.computeSize,type:"compute_instance",suppressToast:!0}),ee(!1),eD.reset(e),h.oR.success("Successfully updated disk settings!".concat(t?" The requested changes will be applied to your disk shortly.":""))}catch(e){en({message:e instanceof Error?e.message:"An unknown error occurred",type:"error"})}};return(0,m.useEffect)(()=>{(eu||eT)&&eD.reset(eI,{})},[eT,eu]),(0,s.jsx)(F.lV,{...eD,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"DiskManagementForm","data-sentry-source-file":"DiskManagementForm.tsx",children:(0,s.jsxs)("form",{onSubmit:eD.handleSubmit(e0),className:"flex flex-col gap-8",children:[(0,s.jsxs)(f.eh,{className:"relative flex flex-col gap-10",bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"DiskManagementForm.tsx",children:[(0,s.jsx)(eC.Y,{type:"default",visible:eM,title:"Compute and Disk configuration is not available on the Free Plan",actions:(0,s.jsx)(G.$,{type:"default",asChild:!0,children:(0,s.jsx)(u(),{href:"/org/".concat(null==N?void 0:N.slug,"/billing?panel=subscriptionPlan&source=diskManagementConfigure"),children:"Upgrade plan"})}),description:"You will need to upgrade to at least the Pro Plan to configure compute and disk","data-sentry-element":"NoticeBar","data-sentry-source-file":"DiskManagementForm.tsx"}),eL||eY||eq?(0,s.jsxs)("div",{className:"relative flex flex-col gap-10",children:[(0,s.jsx)(et,{visible:eL,title:"Your project will now automatically restart.",description:"Your project will be unavailable for up to 2 mins."}),(0,s.jsx)(eC.Y,{type:"default",visible:eY,title:"Disk configuration changes have been requested",description:"The requested changes will be applied to your disk shortly"}),(0,s.jsx)(eC.Y,{type:"default",visible:eq,title:"You do not have permission to update disk configuration",description:"Please contact your organization administrator to update your disk configuration"})]}):null,(0,s.jsx)(E.w,{"data-sentry-element":"Separator","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,s.jsx)(e_,{form:eD,disabled:eM,"data-sentry-element":"ComputeSizeField","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,s.jsx)(E.w,{"data-sentry-element":"Separator","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,s.jsx)(e4,{"data-sentry-element":"SpendCapDisabledSection","data-sentry-source-file":"DiskManagementForm.tsx"}),(0,s.jsx)(eC.Y,{type:"default",visible:U,title:"Disk configuration is not available on Fly Postgres",description:eG?"Delete and recreate your Preview Branch to configure disk size. It was deployed on an older branching infrastructure.":"The Fly Postgres offering is deprecated - please migrate your instance to Supabase to configure your disk.","data-sentry-element":"NoticeBar","data-sentry-source-file":"DiskManagementForm.tsx"}),!U&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,s.jsx)(e5,{}),!q&&eA/eB*100>=90&&ep&&(0,s.jsx)(Y.Z,{type:"destructive",title:"Database size is currently over 90% of disk size",description:"Your project will enter read-only mode once you reach 95% of the disk space to prevent your database from exceeding the disk limitations",children:(0,s.jsx)(y.A,{abbrev:!1,className:"mt-2",href:"https://supabase.com/docs/guides/platform/database-size#read-only-mode"})}),q&&(0,s.jsx)(Y.Z,{type:"destructive",title:"Project is currently in read-only mode",description:"You will need to manually override read-only mode and reduce the database size to below 95% of the disk size",children:(0,s.jsx)(y.A,{abbrev:!1,className:"mt-2",href:"https://supabase.com/docs/guides/platform/database-size#disabling-read-only-mode"})})]}),(0,s.jsx)(eJ,{form:eD,disableInput:eE,setAdvancedSettingsOpenState:el}),(0,s.jsx)(E.w,{}),(0,s.jsxs)(Z.Nt,{className:"-space-y-px",open:er,onOpenChange:()=>el(e=>!e),children:[(0,s.jsxs)(Z.R6,{className:"px-8 py-3 w-full border flex items-center gap-6 rounded-t data-[state=closed]:rounded-b group justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsx)("span",{className:"text-sm text-foreground",children:"Advanced disk settings"}),(0,s.jsx)("span",{className:"text-sm text-foreground-light text-left",children:"Specify additional settings for your disk, including autoscaling configuration, IOPS, throughput, and disk type."})]}),(0,s.jsx)(d.A,{size:16,className:"text-foreground-light transition-all group-data-[state=open]:rotate-90",strokeWidth:1})]}),(0,s.jsxs)(Z.Ke,{className:(0,L.cn)("flex flex-col gap-8 py-8 transition-all","data-[state=open]:border data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down"),children:[(0,s.jsx)("div",{className:"px-8 flex flex-col gap-y-8",children:(0,s.jsx)(eN,{form:eD})}),(0,s.jsx)(E.w,{}),(0,s.jsxs)("div",{className:"px-8 flex flex-col gap-y-8",children:[(0,s.jsx)(eC.Y,{type:"default",visible:eF,title:"Adjusting disk configuration requires LARGE Compute size or above",description:"Increase your compute size to adjust your disk's storage type, ".concat("gp3"===eD.getValues("storageType")?"IOPS, ":""," and throughput"),actions:(0,s.jsx)(G.$,{type:"default",onClick:()=>{eD.setValue("computeSize","ci_large")},children:"Change to LARGE Compute"})}),(0,s.jsx)(e1,{form:eD,disableInput:eF||eE}),(0,s.jsx)(eQ,{form:eD,disableInput:eF||eE}),(0,s.jsx)(e2,{form:eD,disableInput:eF||eE})]})]})]})]})]}),(0,s.jsx)(l.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"DiskManagementForm.tsx",children:eZ?(0,s.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.1,delay:.2},className:"z-10 w-full left-0 right-0 sticky bottom-0 bg-surface-100 border-t h-16 items-center flex",children:(0,s.jsxs)("div",{className:(0,L.cn)(f.bV,f.BS,"flex items-center gap-3 justify-end"),children:[(0,s.jsx)(H,{formState:eO}),(0,s.jsx)(G.$,{type:"default",onClick:()=>eD.reset(),disabled:!eZ,size:"medium",children:"Cancel"}),(0,s.jsx)(ef,{loading:eU||e$||eK,disabled:eq,form:eD,numReplicas:eR.length,isDialogOpen:K,onSubmit:e0,setIsDialogOpen:ee,message:ei})]})}):null})]})})}var e8=a(67397),e7=a(95293);let te=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"compute-and-disk.tsx",children:(0,s.jsxs)(f.Uw,{"data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"compute-and-disk.tsx",children:[(0,s.jsx)(f.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"compute-and-disk.tsx",children:"Compute and Disk"}),(0,s.jsx)(f.dX,{"data-sentry-element":"ScaffoldDescription","data-sentry-source-file":"compute-and-disk.tsx",children:"Configure the compute and disk settings for your project."})]})}),(0,s.jsx)(e9,{"data-sentry-element":"DiskManagementForm","data-sentry-source-file":"compute-and-disk.tsx"})]});te.getLayout=e=>(0,s.jsx)(e8.A,{children:(0,s.jsx)(e7.A,{children:e})});let tt=te},20969:(e,t,a)=>{"use strict";a.d(t,{A0:()=>l,BF:()=>o,Gg:()=>d,Hj:()=>c,XI:()=>r,nA:()=>m,nd:()=>u,r6:()=>p});var s=a(80263),i=a(53239),n=a(2);let r=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("div",{className:"w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...i})})});r.displayName="Table";let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...i})});l.displayName="TableHeader";let o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...i})});o.displayName="TableBody";let d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,n.cn)("bg-primary font-medium text-primary-foreground",a),...i})});d.displayName="TableFooter";let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...i})});c.displayName="TableRow";let u=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-foreground-muted [&:has([role=checkbox])]:pr-0",a),...i})});u.displayName="TableHead";let m=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...i})});m.displayName="TableCell";let p=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-foreground-muted",a),...i})});p.displayName="TableCaption"},24591:(e,t,a)=>{"use strict";a.d(t,{g:()=>i});var s=a(58897);function i(e){switch(e){case s.xq.AWS.id:return"ARM";case s.xq.FLY.id:return"x86 64-bit";default:return""}}},46873:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>d,ZB:()=>o,Zp:()=>r,aR:()=>l,wL:()=>c});var s=a(80263),i=a(53239),n=a(2);let r=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-surface-100 text-card-foreground shadow-sm",a),...i})});r.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 py-4 px-6 border-b",a),...i})});l.displayName="CardHeader";let o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-xs font-mono uppercase",a),...i})});o.displayName="CardTitle",i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-foreground-muted",a),...i})}).displayName="CardDescription";let d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("py-4 px-6 border-b last:border-none",a),...i})});d.displayName="CardContent";let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)(" flex items-center py-4 px-6",a),...i})});c.displayName="CardFooter"},52839:(e,t,a)=>{"use strict";a.d(t,{e:()=>d,p:()=>o});var s=a(80263),i=a(72342),n=a(24922),r=a(53239),l=a(2);let o=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(i.bL,{className:(0,l.cn)("grid gap-2",a),...n,ref:t})});o.displayName=i.bL.displayName;let d=r.forwardRef((e,t)=>{let{image:a,label:r,showIndicator:o=!0,...d}=e;return(0,s.jsxs)(i.q7,{ref:t,...d,className:(0,l.cn)("flex flex-col gap-2","w-48","bg-overlay","rounded-md","border","p-2","hover:border-foreground-muted","hover:z-[1] focus-visible:z-[1]","data-[state=checked]:z-[1]","data-[state=checked]:ring-2 data-[state=checked]:ring-border","data-[state=checked]:bg-surface-200 dark:data-[state=checked]:bg-surface-300","data-[state=checked]:border-foreground/50","transition-colors","group",d.className),children:[d.children,(0,s.jsxs)("label",{className:"flex gap-2 w-full",id:d.id,htmlFor:d.value,children:[o&&(0,s.jsx)("div",{className:" aspect-square h-4 w-4  rounded-full border group-data-[state=checked]:border-foreground-muted group-focus:border-foreground-muted group-hover:border-foreground-muted ring-offset-background  group-focus:outline-none  group-focus-visible:ring-2 group-focus-visible:ring-ring group-focus-visible:ring-offset-2  group-disabled:cursor-not-allowed group-disabled:opacity-50 flex items-center justify-center transition ",children:(0,s.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}),(0,s.jsx)("div",{className:(0,l.cn)("w-full","text-xs transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground",d.disabled?"cursor-not-allowed":"cursor-pointer"),children:r})]})]})});d.displayName=i.q7.displayName},69603:(e,t,a)=>{"use strict";a.d(t,{F:()=>d});var s=a(32144),i=a(80251),n=a(73969),r=a(3807),l=a(60237);async function o(e){let{projectRef:t,variant:a,type:s}=e;if(!t)throw Error("projectRef is required");if(!a)throw Error("variant is required");if(!s)throw Error("type is required");let{data:i,error:n}=await (0,r.bE)("/platform/projects/{ref}/billing/addons",{params:{path:{ref:t}},body:{addon_type:s,addon_variant:a}});return n&&(0,r.H4)(n),i}let d=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.jE)();return(0,i.n)(e=>o(e),{async onSuccess(t,a,s){let{projectRef:i}=a;await r.invalidateQueries(l.s.addons(i)),await (null==e?void 0:e(t,a,s))},async onError(e,a,s){void 0===t?n.oR.error("Failed to update addon: ".concat(e.message)):t(e,a,s)},...a})}},72033:(e,t,a)=>{"use strict";a.d(t,{R:()=>r});var s=a(80263),i=a(38952),n=a(2);function r(e){let{infraComputeSize:t,className:a,...r}=e,l=(null==t?void 0:t.toLocaleLowerCase())==="micro"||(null==t?void 0:t.toLocaleLowerCase())==="nano";return(0,s.jsx)(i.E,{className:(0,n.cn)("rounded-md text-center flex justify-center font-mono uppercase","group-data-[state=open]:bg-opacity-20 group-data-[state=open]:ring-2 group-data-[state=open]:ring-opacity-20","transition-all",l?"group-data-[state=open]:ring-foreground-muted bg-opacity-50 group-data-[state=open]:bg-opacity-75":"group-data-[state=open]:ring-brand",a),variant:t?l?"default":"brand":"default",...r,"data-sentry-element":"Badge","data-sentry-component":"ComputeBadge","data-sentry-source-file":"index.tsx",children:t})}},73790:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/compute-and-disk",function(){return a(6220)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[89,9413,6110,3342,4376,2180,7990,8058,5513,5944,4346,2981,6835,7762,9067,1478,2501,2722,7397,886,1152,8601,1711,1173,6593,636,8792],()=>t(73790)),_N_E=e.O()}]);